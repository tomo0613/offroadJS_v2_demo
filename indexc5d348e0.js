var pi=Object.defineProperty;var li=(e,t,i)=>t in e?pi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var r=(e,t,i)=>(li(e,typeof t!="symbol"?t+"":t,i),i);import{V as w,t as ci,S as di,B as qt,C as ke,a as gi,b as Te,c as dt,d as G,e as ee,Q as le,R as _i,M as Fe,W as mi,f as ui,g as yi}from"./vendor/cannon-b9fe1075.js";import{S as xi}from"./vendor/vendor-8996eea6.js";import{G as fi,g as wi,I as bi,h as Ae,M as Pt,E as vi,a as ht,d as zi,V as b,i as Ci,O as Si,B as Ie,C as Mi,S as Pi,j as Re,k as Ei,e as Ft,l as Li,m as Be,n as yt,R as ki,o as Oe,p as Ti,q as Fi,r as Ai,H as Ii,W as Ri,s as Bi,D as Oi,t as Di,u as ji,v as Wi,w as Hi,x as Ni,A as $i,y as Vi,z as Ki,J as Ui,K as qi,N as Gi}from"./vendor/three-5c8f7b36.js";import{j as g,r as m,a as ft}from"./vendor/react-01fd2a3a.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();class pt{constructor(){r(this,"listeners",new Map)}add(t,i){if(!i)throw new Error(`EventListener->add($listener) Invalid $listener: ${i}, with type ${t}`);if(this.listeners.has(t))this.listeners.get(t).add(i);else{const o=new Set([i]);this.listeners.set(t,o)}}remove(t,i){if(this.listeners.has(t)){const o=this.listeners.get(t);o.delete(i),o.size||this.listeners.delete(t)}}clear(){this.listeners.clear()}dispatch(t,...i){this.listeners.has(t)&&this.listeners.get(t).forEach(n=>n(...i))}}const De=["fullscreen","antialias","renderShadows","renderWireFrame","resolutionScale","audioVolume","autoResetDelay","showTelemetry"],Zi={fullscreen:!1,antialias:!1,renderShadows:!1,renderWireFrame:!1,resolutionScale:1,audioVolume:.5,showTelemetry:!1,autoResetDelay:2500,powerPreference:"high-performance",physicsFrameRate:120,world:{gravity:{x:0,y:-9.8,z:0}},camera:{fov:50,near:.1,far:1e3,initialPosition:{x:0,y:7,z:27},mountOffset_v3:[0,4,9],mountOffsetReverse_v3:[5,4,-9],lookOffset_v3:[0,1,-5]},vehicle:{mass:30,steeringSpeed:.02,maxSteeringAngle:.7,maxBrakeForce:22,maxEngineForce:220,torqueSplitRatio:[50,50],cameraMountPosition:{x:0,y:4,z:10},wheelRadius:.4,wheelSuspensionRestLength:.3,wheelSuspensionStiffness:25,wheelMaxSuspensionTravel:.3,wheelMaxSuspensionForce:Number.MAX_VALUE,wheelDampingCompression:2,wheelDampingRelaxation:2,wheelFrictionSlip:1.1,wheelForwardAcceleration:1/2,wheelSidedAcceleration:1,wheelRollInfluence:.6}},kt=new pt,Ht=De.reduce((e,t)=>{try{const i=window.localStorage.getItem(t);i&&(e[t]=JSON.parse(i))}catch(i){console.error(i)}return e},{}),f=new Proxy(Zi,{get(e,t){return Ht.hasOwnProperty(t)?Ht[t]:e[t]},set(e,t,i){if(De.includes(t)){Ht[t]=i,kt.dispatch(t,i);try{window.localStorage.setItem(t,String(i))}catch(o){console.error(o)}}return!0}});class je{constructor(t,i){r(this,"items");r(this,"activeCount",0);r(this,"itemProvider");r(this,"itemActivator");r(this,"itemDeactivator");r(this,"itemActiveCheck");r(this,"obtain",()=>{this.activeCount>=this.items.length&&this.items.push(this.itemProvider(this.items.length));const t=this.items[this.activeCount++];return this.itemActivator(t),t});r(this,"release",t=>{if(!this.itemActiveCheck(t))throw new Error(`ObjectPool->release($item) Not active $item: ${JSON.stringify(t)}`);if(this.activeCount--,this.itemDeactivator(t),!this.activeCount)return;const i=this.items.indexOf(t),o=this.items[this.activeCount];if(i<0)throw new Error(`ObjectPool->release($item) Not valid $item: ${JSON.stringify(t)}`);t!==o&&(this.items[this.activeCount]=this.items[i],this.items[i]=o)});r(this,"releaseAll",()=>{this.forActive(this.release)});r(this,"forActive",t=>{for(let i=this.activeCount-1;i>=0;i--)t.call(this,this.items[i])});this.itemProvider=i.itemProvider,this.itemActivator=i.itemActivator,this.itemDeactivator=i.itemDeactivator,this.itemActiveCheck=i.itemActiveCheck,this.items=Array.from({length:t}).map(this.itemProvider)}}const Yi=function({label:e,id:t,children:i}){return e?g.jsxs("div",{className:"inputContainer",children:[g.jsx("label",{htmlFor:t,children:e}),i]}):g.jsx(g.Fragment,{children:i})};function V(){}function vt(e,t="?"){const i=e.split(".").pop(),o=Mo(`Loading resource: ${e}`);let n;switch(i){case"jpg":n=new bi;break;case"svg":n=new wi;break;case"glb":case"gltf":n=new fi;break;default:return Promise.reject(new Error(`unknown resource type [${i}]`))}return new Promise((a,h)=>{const l=c=>{a(c),Ke(o)},d=c=>{console.error(`Failed to load resource: ${e}`),h(c)};n.load(e,l,s,d)});function s({loaded:a,total:h,lengthComputable:l}){const d=l?`${ce(h,"k")} kB`:t;o.setContent(`Loading resource: ${e} (${ce(a,"k")} / ${d})`)}}function ce(e,t){let i=e;const o=["k","M","G","T"].indexOf(t)+1;for(let n=0;n<o;n++)i/=1024;return i.toFixed(2)}function Xi({paths:e},t={}){const i=new Ae,o={bevelEnabled:!1,depth:1};for(let p=0;p<e.length;p++){const _=e[p],x=new Pt({color:_.color}),C=_.toShapes(!1);for(let z=0;z<C.length;z++){const O=C[z],S=new vi(O,o),A=new ht(S,x);i.add(A)}}const{x:n,y:s,z:a}=new zi().setFromObject(i).getSize(new b),{x:h=0,y:l=0,z:d=0,scale:c=1}=t;return i.traverse(p=>{p.translateX(-n/2+h),p.translateY(-s/2+l),p.translateZ(-a/2+d)}),i.rotateY(Math.PI),i.rotateZ(Math.PI),i.scale.set(c,c,c),i}function Ji(e,t=1024){return[{x:2,y:1},{x:0,y:1},{x:1,y:0},{x:1,y:2},{x:1,y:1},{x:3,y:1}].map(o);function o({x:n,y:s}){const a=document.createElement("canvas");return a.width=t,a.height=t,a.getContext("2d").drawImage(e,-n*t,-s*t),a}}function We(e,t=200,i=!1){let o;return(...n)=>{i&&!o&&e(...n),clearTimeout(o),o=window.setTimeout(()=>{i?o=void 0:e(...n)},t)}}function Qi(e,t=200){let i,o,n,s;return(...a)=>{s=o+t,n=performance.now(),!o||n>s?(e(...a),o=n):(window.clearTimeout(i),i=window.setTimeout(()=>{e(...a),o=n},t-(n-o)))}}const to=/Android|iPhone|iPad/i;function eo(){return to.test(window.navigator.userAgent)}function ie(e){const t=Math.floor(e%1e3),i=Math.floor(e/1e3%60),o=Math.floor(e/6e4%60);return`${de(o)}:${de(i)}.${t}`}function de(e){const t=e.toString();return t.length<2?`0${e}`:t}function io(e){return`#${e.toString(16).toUpperCase()}`}function ks(e){return parseInt(e.replace("#",""),16)}function it(e){return Math.round((e+Number.EPSILON)*100)/100}function oo(e,t,i){return Math.max(t,Math.min(e,i))}function no(e,...t){return Object.keys(e).reduce((i,o)=>(t.includes(o)||(i[o]=e[o]),i),{})}function so(e,...t){return t.reduce((i,o)=>(e.hasOwnProperty(o)&&(i[o]=e[o]),i),{})}Object.defineProperties(Object,{omit:{value:no},pick:{value:so}});const At=document.createElement("datalist");At.id="colorValueList";document.documentElement.appendChild(At);function ao(e){const t=document.createElement("option");t.textContent=io(e),At.appendChild(t)}class Gt extends m.Component{constructor(i){super(i);r(this,"inputRef",m.createRef());r(this,"onInputFieldChange",({currentTarget:i})=>{this.props.onInput&&this.props.onInput(i.value),this.setState({value:i.value})});r(this,"onInputFieldKeyUp",({key:i})=>{(i==="Enter"||i==="Escape")&&this.inputElement.blur()});r(this,"onInputFieldBlur",()=>{this.state.value!==this.props.value.toLowerCase()&&this.props.onChange(this.state.value,this.props.id)});this.state={value:i.value.toLowerCase()}}render(){const{id:i,label:o}=this.props,{value:n}=this.state;return g.jsx(Yi,{label:o,id:i,children:g.jsx("input",{type:"color",list:At.id,value:n,id:i,name:i,onChange:this.onInputFieldChange,onBlur:this.onInputFieldBlur,onKeyUp:this.onInputFieldKeyUp,ref:this.inputRef})})}componentDidUpdate(i){this.props.value!==i.value&&this.setState({value:this.props.value})}get inputElement(){return this.inputRef.current}}r(Gt,"defaultProps",{id:"",label:"",value:"",onChange:V}),r(Gt,"addColorValues",(...i)=>{i.forEach(ao)});const ro=new Set(["Space","PageUp","PageDown","End","Home","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Escape","Tab"]),ho=new Set(["KeyF","KeyH","KeyJ","KeyO","KeyP","KeyS"]),Y=new Set;let rt;const It=new Set,Rt=new pt,j={addKeyPressListener:co,removeKeyPressListener:go,addKeyDownChangeListener:po,removeKeyDownChangeListener:lo,clearKeysDown:_o};function po(e){It.add(e)}function lo(e){It.delete(e)}function co(e,t){Rt.add(e,t)}function go(e,t){Rt.remove(e,t)}function _o(){Y.clear(),It.forEach(Ne)}window.onkeydown=window.onkeyup=e=>{e.target.tagName==="INPUT"||e.target.tabIndex>-1||((ro.has(e.code)||e.ctrlKey&&ho.has(e.code))&&e.preventDefault(),!(e.type==="keydown"&&e.repeat)&&(rt=e.code,e.type==="keyup"?(Y.delete(rt),Rt.dispatch(rt,e)):Y.add(rt),Zt()))};window.onbeforeunload=e=>{if(Y.has("ControlLeft"))return e.preventDefault(),Y.clear(),""};Et("topLeftPanel","Tab","⋮");eo()&&(zt("bottomLeftPanel","ArrowUp","▲"),zt("bottomLeftPanel","ArrowDown","▼"),zt("bottomRightPanel","ArrowLeft","◄"),zt("bottomRightPanel","ArrowRight","►"),Et("topRightPanel","KeyP","p"),Et("topRightPanel","KeyC","c"),Et("topRightPanel","KeyR","⟲"));function He(e,t,i){const o=document.createElement("button");o.addEventListener("mousedown",t),o.addEventListener("touchstart",t),o.addEventListener("mouseup",i),o.addEventListener("mouseleave",i),o.addEventListener("touchcancel",i),o.addEventListener("touchend",i);const n=document.getElementById(e);return n.classList.remove("hidden"),n.appendChild(o)}function Et(e,t,i){const o=We(s=>{rt=t,Rt.dispatch(rt,s)},200,!0),n=He(e,o,V);n.textContent=i,n.id=t,n.classList.add("screenButton")}function zt(e,t,i){const s=He(e,()=>{Y.add(t),Zt()},()=>{Y.delete(t),Zt()});s.textContent=i,s.id=t,s.classList.add("screenKey")}function Zt(){It.forEach(Ne)}function Ne(e){e(Y)}const mo=`
    input:not([disabled]),
    textarea:not([disabled]),
    button:not([disabled]),
    select,
    [tabindex]
`,uo="⨯",R=document.createElement("aside");R.classList.add("hidden");R.id="modal__root";R.tabIndex=-1;document.body.appendChild(R);const yo=function({onClose:e,children:t}){return g.jsxs("div",{className:"modal__container",children:[e&&g.jsx("span",{className:"modal__closeButton",onClick:e,children:uo}),t]})},$e=function({onClose:e,children:t}){const i=document.activeElement;return m.useEffect(()=>(j.clearKeysDown(),R.classList.remove("hidden"),R.addEventListener("keydown",o),R.addEventListener("keyup",n),R.focus(),()=>{R.removeEventListener("keydown",o),R.removeEventListener("keyup",n),R.classList.add("hidden"),i.focus()}),[]),ft.createPortal(g.jsx(yo,{onClose:e,children:t}),R);function o(a){a.stopPropagation(),a.key==="Tab"&&a.preventDefault()}function n(a){a.stopPropagation(),a.preventDefault(),e&&a.key==="Escape"?e():a.key==="Tab"&&s(a.shiftKey?-1:1)}function s(a){const h=xo(R);if(!h.length)return;const l=document.activeElement,d=h.indexOf(l),c=h.length-1;let p=d+a;p<0?p=c:p>c&&(p=0),h[p].focus()}};function xo(e){return[...e.querySelectorAll(mo)].filter(fo)}function fo(e){return e.tabIndex!==-1&&window.getComputedStyle(e).visibility!=="hidden"}const wo={okButtonLabel:"Ok",cancelButtonLabel:"Cancel",importButtonLabel:"Import",exportButtonLabel:"Export",mapElementListLabel:"Map elements:",translatePanelLabel:"Translate",positionLabel:"position",rotationLabel:"rotation",transformPanelLabel:"Transform",widthLabel:"width:",heightLabel:"height:",lengthLabel:"length:",lengthTopLabel:"length top:",radiusLabel:"radius:",radiusTopLabel:"radius top:",radiusBottomLabel:"radius bottom:",sidesLabel:"sides:",segmentWidthLabel:"segment width:",segmentHeightLabel:"segment height:",segmentLengthLabel:"segment length:",segmentCountLabel:"segment count:",offsetLabel:"offset:",skewLabel:"skew:",angleLabel:"angle:",cloneButtonLabel:"clone",removeButtonLabel:"remove",createButtonLabel:"create",fullscreenSwitchLabel:"Fullscreen:",renderWireFrameSwitchLabel:"Render wireFrame:",resolutionScaleSliderLabel:"Resolution scale:",audioEnabled:"Audio enabled:",audioVolume:"Audio volume:",showTelemetry:"Show telemetry:",autoResetDelay:"Auto reset delay (ms):",antialiasCheckboxLabel:"Antialias:",renderShadowsCheckboxLabel:"Render shadows:",applySettingsButtonLabel:"Apply settings"},ge=new Proxy(wo,{get(e,t){return e[t]}});var N=(e=>(e.open="open",e.confirm="confirm",e.didMount="didMount",e.willUnmount="willUnmount",e))(N||{});const B=new pt,Bt=document.createElement("aside");Bt.id="menuModalControllerRoot";Bt.classList.add("hidden");document.body.appendChild(Bt);function bo(){ft.render(g.jsx(m.StrictMode,{children:g.jsx(vo,{})}),Bt)}function vo(){const[e,t]=m.useState(!0),i=m.useRef("");return m.useEffect(()=>(B.add("open",n),B.dispatch("didMount"),()=>{B.dispatch("willUnmount"),B.remove("open",n)}),[]),e?null:g.jsx(zo,{message:i.current,closeModal:o});function o(){t(!0)}function n(s=""){i.current=s,t(!1)}}function zo({message:e,closeModal:t}){const i=m.useRef();return m.useEffect(()=>{i.current.focus()},[]),g.jsxs($e,{children:[g.jsx("span",{className:"modal__body dialog__message",children:e}),g.jsxs("div",{className:"modal__footer dialog__buttonBar",children:[g.jsx("button",{className:"dialog__button",onClick:o,"data-confirm":"false",children:ge.cancelButtonLabel}),g.jsx("button",{className:"dialog__button",onClick:o,"data-confirm":"true",ref:i,children:ge.okButtonLabel})]})]});function o(n){const s=JSON.parse(n.currentTarget.dataset.confirm);B.dispatch("confirm",s),t()}}class Co{constructor(){r(this,"notificationElement",document.createElement("div"));r(this,"notificationElementBody",document.createElement("span"));this.notificationElement.classList.add("notificationElement","hidden"),this.notificationElement.appendChild(this.notificationElementBody)}get hidden(){return this.notificationElement.classList.contains("hidden")}show(){this.notificationElement.classList.remove("hidden")}fadeOut(){this.notificationElement.classList.add("fade-out")}hide(){this.notificationElement.classList.remove("fade-out"),this.notificationElement.classList.add("hidden")}setContent(t){this.notificationElementBody.textContent=t}}const So=1500,Ve=1e3,oe=document.createElement("div");oe.id="notificationElementContainer";document.body.appendChild(oe);document.documentElement.style.setProperty("--fade-out-duration",`${Ve/1e3}s`);const ne=new je(1,{itemProvider(){return new Co},itemActiveCheck(e){return!e.hidden},itemActivator(e){e.show(),oe.appendChild(e.notificationElement)},itemDeactivator(e){e.hide()}});function Mo(e){const t=ne.obtain();return t.setContent(e),t}function Ke(e){e.fadeOut(),window.setTimeout(()=>{ne.release(e)},Ve)}function xt(e){const t=ne.obtain();t.setContent(e),window.setTimeout(()=>{Ke(t)},So)}let se=!1;B.add(N.didMount,()=>{se=!0});B.add(N.willUnmount,()=>{se=!1});bo();function Po(e){if(se)B.dispatch(N.open,e);else{const t=()=>{B.remove(N.didMount,t),B.dispatch(N.open,e)};B.add(N.didMount,t)}return new Promise(t=>{B.add(N.confirm,i);function i(o){B.remove(N.confirm,i),t(o)}})}var Ue=(e=>(e.cinematic="cinematic",e.free="free",e.chase="chase",e.hood="hood",e))(Ue||{});const Nt=["cinematic","free","chase","hood"],Eo=new b(0,1,0),_e=.2,Lo=new b(...f.camera.mountOffset_v3),ko=new b(...f.camera.mountOffsetReverse_v3),To=new b(...f.camera.lookOffset_v3);class Fo{constructor(t){r(this,"domElement");r(this,"camera");r(this,"orbitControls");r(this,"cameraTarget");r(this,"cameraPosition",new b);r(this,"currentCameraMode");r(this,"idealChaseCameraLookPosition",new b);r(this,"idealChaseCameraMountPosition",new b);r(this,"actualChaseCameraLookPosition",new b);r(this,"update",V);this.domElement=t,this.camera=new Ci(f.camera.fov,window.aspectRatio,f.camera.near,f.camera.far),this.camera.position.set(f.camera.initialPosition.x,f.camera.initialPosition.y,f.camera.initialPosition.z),this.cameraPosition.copy(this.camera.position),this.orbitControls=new Si(this.camera,t),this.orbitControls.minDistance=1,this.orbitControls.enabled=!1}set cameraMode(t){if(this.currentCameraMode!==t){switch(this.currentCameraMode){case"cinematic":case"chase":this.update=V;break;case"hood":this.cameraTarget.chassisMesh.remove(this.camera),this.camera.position.copy(this.cameraTargetPosition),this.camera.position.y+=5,this.camera.fov=f.camera.fov,this.camera.updateProjectionMatrix();break;case"free":this.orbitControls.enabled=!1;break}switch(t){case"cinematic":this.update=this.updateDynamicCamera,xt('Camera mode is set to: "cinematic"');break;case"chase":this.update=this.updateChaseCamera,xt('Camera mode is set to: "chase"');break;case"hood":this.cameraTarget.chassisMesh.add(this.camera),this.camera.position.set(0,1.1,-.47),this.camera.rotation.set(0,0,0),this.camera.fov=60,this.camera.updateProjectionMatrix(),this.update=V,xt('Camera mode is set to: "hood"');break;case"free":this.orbitControls.enabled=!0,this.orbitControls.target.copy(this.cameraTargetPosition),xt('Camera mode is set to: "free" (use mouse to look around)');break}this.currentCameraMode=t}}get cameraTargetPosition(){return this.cameraTarget.chassisMesh.position}rotate(t){this.camera.rotateOnAxis(Eo,t)}setIdealChaseCameraMountPosition(t){t?this.idealChaseCameraMountPosition.copy(ko):this.idealChaseCameraMountPosition.copy(Lo),this.idealChaseCameraMountPosition.applyQuaternion(this.cameraTarget.chassisMesh.quaternion),this.idealChaseCameraMountPosition.add(this.cameraTargetPosition),this.idealChaseCameraMountPosition.y<this.cameraTargetPosition.y&&this.idealChaseCameraMountPosition.setY(this.cameraTargetPosition.y)}setIdealChaseCameraLookPosition(t){this.idealChaseCameraLookPosition.copy(To),t&&(this.idealChaseCameraLookPosition.z*=-1),this.idealChaseCameraLookPosition.applyQuaternion(this.cameraTarget.chassisMesh.quaternion),this.idealChaseCameraLookPosition.add(this.cameraTargetPosition)}updateDynamicCamera(t){if(this.camera.position.manhattanDistanceTo(this.cameraPosition)>Number.EPSILON){const i=1-_e**t;this.camera.position.lerp(this.cameraPosition,i)}this.camera.lookAt(this.cameraTargetPosition)}updateChaseCamera(t){const{currentVehicleSpeedKmHour:i}=this.cameraTarget.base,o=Math.round(-i)<-1,n=1-_e**t;this.setIdealChaseCameraMountPosition(o),this.setIdealChaseCameraLookPosition(o),this.camera.position.lerp(this.idealChaseCameraMountPosition,n),this.actualChaseCameraLookPosition.lerp(this.idealChaseCameraLookPosition,n),this.camera.lookAt(this.actualChaseCameraLookPosition)}switchMode(){const t=Nt.indexOf(this.currentCameraMode),i=t<Nt.length-1?t+1:0,o=Nt[i];this.cameraMode=o}setCameraTarget(t){t!==this.cameraTarget&&(this.cameraTarget=t)}}const Ao="modulepreload",Io=function(e,t){return new URL(e,t).href},me={},qe=function(t,i,o){if(!i||i.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=Io(s,o),s in me)return;me[s]=!0;const a=s.endsWith(".css"),h=a?'[rel="stylesheet"]':"";if(!!o)for(let c=n.length-1;c>=0;c--){const p=n[c];if(p.href===s&&(!a||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${h}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":Ao,a||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),a)return new Promise((c,p)=>{d.addEventListener("load",c),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};function Ge(){return g.jsx("div",{children:"Loading..."})}const lt=document.createElement("aside");lt.id="editorPanel";lt.classList.add("floatingPanel","hidden");document.body.appendChild(lt);const Ro={mapBuilder:void 0,mapElementProps:void 0,editorPanelVisible:!1},Ze=m.createContext(Ro);function Bo(e){ft.render(g.jsx(Oo,{mapBuilder:e}),lt)}function Oo({mapBuilder:e}){const[t,i]=m.useState(e.editMode),[o,n]=m.useState(e.selectedMapElementId),[s,a]=m.useState();m.useEffect(()=>(e.listeners.add(q.mapElementSelect,n),e.listeners.add(q.mapElementChange,a),e.listeners.add(q.editModeChange,i),()=>{e.listeners.remove(q.mapElementSelect,n),e.listeners.remove(q.mapElementChange,a),e.listeners.remove(q.editModeChange,i)}),[]),m.useEffect(()=>{a({...e.getPropsFromStore(o)})},[o]),m.useEffect(()=>{t?lt.classList.remove("hidden"):lt.classList.add("hidden")},[t]);const h={mapBuilder:e,mapElementProps:s,editorPanelVisible:t};return g.jsx(Ze.Provider,{value:h,children:g.jsx(Do,{})})}function Do(){const{editorPanelVisible:e}=m.useContext(Ze),t=m.lazy(()=>qe(()=>import("./modules/EditorPanel-63cc9b14.js"),["./modules\\EditorPanel-63cc9b14.js","./vendor\\react-01fd2a3a.js","./vendor\\vendor-8996eea6.js","./modules\\Switch-9a6a2f6d.js","./vendor\\cannon-b9fe1075.js","./vendor\\three-5c8f7b36.js"],import.meta.url));return m.useMemo(()=>e?g.jsx(m.Suspense,{fallback:g.jsx(Ge,{}),children:g.jsx(t,{})}):null,[e])}const gt=new w;function jo(e,t){const i=new w,o=new w,n=new w,s=new w,{movement:{x:a=0,y:h=0,z:l=0},speed:d=1,triggerStart:c=!0,alternate:p=!0,alternateDelay:_=0}=JSON.parse(t),x=d*.05;return n.copy(e.position),s.set(a,h,l),s.vadd(e.position,s),s.vsub(n,gt),gt.normalize(),gt.scale(d,i),i.negate(o),{triggerStart:c,movementHandler:C,velocity_x:i.x,velocity_y:i.y,velocity_z:i.z};function C(){e.position.almostEquals(s,x)&&S(s)?(p?_?(e.velocity.setZero(),window.setTimeout(z,_*1e3)):z():e.velocity.setZero(),e.position.copy(s)):e.position.almostEquals(n,x)&&S(n)&&(_?(e.velocity.setZero(),window.setTimeout(O,_*1e3)):O(),e.position.copy(n))}function z(){e.velocity.copy(o)}function O(){e.velocity.copy(i)}function S(A){return A.vsub(e.position,gt),gt.dot(e.velocity)>0}}function Ct({shape:e,width:t,height:i,length:o,lengthTop:n,radius:s,radiusTop:a,radiusBottom:h,sides:l,offset:d,skew:c}){switch(e){case F.box:return[Ho(t,i,o),Wo(t,i,o)];case F.cylinder:return[$o(a,h,i,l),No(a,h,i,l)];case F.sphere:return[Ko(s),Vo(s)];case F.tetrahedron:{const p=qo(t,i,o);return[p,ue(p)]}case F.triangularPrism:{const p=Go(t,i,o,d);return[p,ue(p)]}case F.trapezoidalPrism:{const p=Uo(t,i,n,o,c),_=new ht(p);return[ci(_,{type:di.HULL}).shape,p]}default:return[]}}function Wo(e=2,t=2,i=2){return new Ie(e,t,i)}function Ho(e=2,t=2,i=2){return new qt(new w(e/2,t/2,i/2))}function No(e=1,t=1,i=2,o=6){return new Mi(e,t,i,Math.max(3,o))}function $o(e=1,t=1,i=2,o=6){return new ke(e,t,i,Math.max(3,o))}function Vo(e=1){return new Pi(e)}function Ko(e=1){return new gi(e)}function Uo(e=2,t=2,i=4,o=2,n=0){const s=e/2,a=t/2,h=i/2,l=o/2,d=new b(-l,-a,-s+n),c=new b(l,-a,-s-n),p=new b(h,a,-s-n),_=new b(-h,a,-s+n),x=new b(-l,-a,s+n),C=new b(l,-a,s-n),z=new b(h,a,s-n),O=new b(-h,a,s+n);return new Re([d,c,p,_,x,C,z,O])}function ue(e){return new Re(e.vertices.map(({x:t,y:i,z:o})=>new b(t,i,o)))}function qo(e=1,t=1,i=1){const o=[new w(0,0,0),new w(e*2,0,0),new w(0,t*2,0),new w(0,0,i*2)],n=[[0,2,1],[1,2,3],[0,1,3],[3,2,0]];return new Te({vertices:o,faces:n})}function Go(e=2,t=2,i=2,o=0){const n=e/2,s=t/2,a=i/2,h=[new w(n,s,o),new w(n,-s,-a),new w(n,-s,a),new w(-n,s,o),new w(-n,-s,-a),new w(-n,-s,a)],l=[[2,1,0],[4,5,3],[4,1,2,5],[3,0,1,4],[5,2,0,3]],d=Yo(h,l);return new Te({vertices:h,faces:l,normals:d})}const ye=new w,Zo=new w,ot=new w;new b;new b(0,0,1);function Yo(e,t){return Xo(e),t.map(i=>{const o=e[i[0]],n=ye.copy(e[i[1]]),s=Zo.copy(e[i[2]]);n.vsub(o,n),s.vsub(o,s);const a=new w().copy(n);a.cross(s,a).normalize();const h=ye.copy(o);return o.vsub(ot,h),a.dot(h)<0&&a.negate(),a})}function Xo(e){const{length:t}=e;ot.set(0,0,0);for(let i=0;i<t;i++)ot.vadd(e[i],ot);ot.scale(1/t,ot)}const{degToRad:Jo,radToDeg:$}=Ft,Qo={segmentCount:13,segmentWidth:4,segmentHeight:.1,segmentLength:4,segmentPositionOffset:.4,radius:8},tn={segmentCount:2,segmentWidth:2,segmentHeight:.4,segmentLength:4,angle:30},en={segmentCount:10,segmentWidth:4,segmentHeight:.1,segmentLength:2,angle:30,radius:8},on=["loop","slopeTransition","cantedCurve"],Ye=new b,Z=new b,nn=new b,xe=new b,y=new Ei;function fe(e){switch(e.shape){case F.loop:return sn(e);case F.slopeTransition:return rn(e);case F.cantedCurve:return an(e);default:return[]}}function sn(e){const{segmentCount:t,segmentWidth:i,segmentHeight:o,segmentLength:n,segmentPositionOffset:s,radius:a}=ae(e,Qo),h=[],l=Math.atan(a/(n/2)),d=Math.PI-2*l,c=Ye.set(1,0,0);for(let p=0;p<t;p++)Z.set(s*p,-a,0).applyAxisAngle(c,d*p),h.push({shape:F.box,width:i,height:o,length:n,position_x:Z.x,position_y:Z.y,position_z:Z.z,rotation_x:$(d*p)});return h}function an(e){const{segmentCount:t,segmentWidth:i,segmentHeight:o,segmentLength:n,angle:s,radius:a}=ae(e,en),h=[],l=Ye;l.set(0,1,0);const d=Jo(s),c=i/2,p=c*Math.cos(d),_=Math.sqrt(c**2-p**2),x=n/2,C=Math.atan((a-p)/x),z=Math.PI-2*C,O=Math.sqrt(n**2+i**2),S=nn.set(x,_,-a+-p),wt=xe.copy(S).applyAxisAngle(l,z).sub(S).length(),tt=(i+O+wt)/2,W=2*Math.sqrt(tt*(tt-i)*(tt-O)*(tt-wt))/i,M=i/2-(i-Math.sqrt(O**2-W**2)),ct=M*Math.cos(d),J=Math.sqrt(M**2-ct**2),Wt=xe.set(x+W,J,-a+-ct);Wt.applyAxisAngle(l,z);const v=Wt.sub(S).length(),P=Math.acos((W**2+W**2-v**2)/(2*W*W)),bt=W/2*Math.sin(P);for(let I=0;I<t+1;I++)l.set(0,1,0),Z.set(0,0,-a).applyAxisAngle(l,z*I),y.position.copy(Z),y.rotation.set(0,z*I,Math.PI/2),y.rotateOnAxis(l,-d),y.translateZ(o/2),I<t&&h.push({shape:F.triangularPrism,width:o,height:n,length:i,offset:i/2,position_x:y.position.x,position_y:y.position.y,position_z:y.position.z,rotation_x:$(y.rotation.x),rotation_y:$(y.rotation.y),rotation_z:$(y.rotation.z)}),I&&(l.set(1,0,0),y.rotateOnAxis(l,Math.PI),y.translateY(n/2+W/2),l.set(0,0,1),y.rotateOnAxis(l,-P),y.translateX(bt),y.translateY(0),h.push({shape:F.triangularPrism,width:o,height:W,length:i,offset:M,position_x:y.position.x,position_y:y.position.y,position_z:y.position.z,rotation_x:$(y.rotation.x),rotation_y:$(y.rotation.y),rotation_z:$(y.rotation.z)}));return h}function rn(e){const{segmentCount:t,segmentWidth:i,segmentHeight:o,segmentLength:n}=ae(e,tn),s=[],a=.1,h=Math.atan(o/i);y.position.set(0,a,0),y.rotation.set(0,0,0);for(let l=0;l<t;l++)l&&(y.translateY(o),y.translateZ(-n)),y.rotation.set(0,0,-h*l),s.push({shape:F.tetrahedron,width:i/2,height:o/2,length:n/2,position_x:y.position.x,position_y:y.position.y,position_z:y.position.z,rotation_z:$(y.rotation.z)}),Z.copy(y.position),y.translateX(i/2),y.translateY(-a/2),y.translateZ(n/2),s.push({shape:F.box,width:i,height:a,length:n,position_x:y.position.x,position_y:y.position.y,position_z:y.position.z,rotation_z:$(y.rotation.z)}),y.position.copy(Z);return s}function ae(e,t){return{...t,...e}}const{degToRad:T}=Ft;var q=(e=>(e.mapElementChange="mapElementChange",e.mapElementSelect="mapElementSelect",e.editModeChange="editModeChange",e))(q||{}),Q=(e=>(e.checkpoint="checkpoint",e.finish="finish",e.reset="reset",e.setCameraMode="setCameraMode",e.setCameraPosition="setCameraPosition",e.startAnimation="startAnimation",e))(Q||{}),hn=(e=>(e.default="default",e.compound="compound",e.animated="animated",e.trigger="trigger",e.vehicle="vehicle",e))(hn||{}),F=(e=>(e.box="box",e.cylinder="cylinder",e.sphere="sphere",e.tetrahedron="tetrahedron",e.triangularPrism="triangularPrism",e.trapezoidalPrism="trapezoidalPrism",e.loop="loop",e.slopeTransition="slopeTransition",e.cantedCurve="cantedCurve",e))(F||{});const nt="vehicle_0",re=12303291,Xe=9814245,Je=10463419,Qe=13464275,St=new Li;let we,be,ve=0;Gt.addColorValues(re,Xe,Je);class pn{constructor(t,i){r(this,"scene");r(this,"world");r(this,"selectedMapElementId");r(this,"perviousSelectedMapElementId");r(this,"mapElementComponentStore",new Map);r(this,"mapElementIdStore",new Set);r(this,"listeners",new pt);r(this,"eventTriggerListeners",new pt);r(this,"editMode",!1);r(this,"onPlaceVehicle",V);r(this,"destroy",t=>{if(t===nt)return;const i=this.getBodyFromStore(t),o=this.getMeshFromStore(t),{type:n}=this.getPropsFromStore(t);if(this.scene.remove(o),this.world.removeBody(i),this.world.removeEventListener("postStep",this.getUpdateMethodFromStore(t)),Yt(o)?o.children.forEach(ze):ze(o),n==="trigger"){const s=this.mapElementComponentStore.get(`${t}_listener`);i.removeEventListener(G.COLLIDE_EVENT_NAME,s),this.mapElementComponentStore.delete(`${t}_listener`)}if(n==="animated"){const s=this.getAnimationPropsFromStore(t);this.world.removeEventListener("preStep",s.movementHandler),this.mapElementComponentStore.delete(`${t}_animationProps`)}this.mapElementIdStore.delete(t),this.mapElementComponentStore.delete(`${t}_mesh`),this.mapElementComponentStore.delete(`${t}_body`),this.mapElementComponentStore.delete(`${t}_updateMethod`),this.mapElementComponentStore.delete(`${t}_props`),this.selectedMapElementId===t&&(this.selectedMapElementId=void 0,this.listeners.dispatch("mapElementSelect",void 0)),this.perviousSelectedMapElementId===t&&(this.perviousSelectedMapElementId=void 0)});r(this,"selectMapElement",t=>{this.selectedMapElementId&&(this.perviousSelectedMapElementId=this.selectedMapElementId),this.selectedMapElementId=t,this.listeners.dispatch("mapElementSelect",this.selectedMapElementId)});r(this,"resetElementIfDynamic",t=>{const{type:i,mass:o,position_x:n=0,position_y:s=0,position_z:a=0,rotation_x:h=0,rotation_y:l=0,rotation_z:d=0}=this.getPropsFromStore(t);if(i==="vehicle"){this.onPlaceVehicle(n,s,a,h,l,d);return}if(!o&&i!=="animated")return;const c=this.getBodyFromStore(t);if(i==="animated"){const{triggerStart:p,velocity_x:_,velocity_y:x,velocity_z:C}=this.getAnimationPropsFromStore(t);p?c.velocity.setZero():c.velocity.set(_,x,C)}else c.velocity.setZero(),c.angularVelocity.setZero();c.position.set(n,s,a),c.quaternion.setFromEuler(T(h),T(l),T(d))});r(this,"importMap",t=>{this.mapElementIdStore.forEach(this.destroy),ve=0,t.forEach(i=>{i.type==="vehicle"?this.placeVehicle({...i}):this.build({...i})})});r(this,"exportMap",()=>({meta:{},elements:Array.from(this.mapElementComponentStore.entries()).filter(([t])=>t.endsWith("props")).map(([,t])=>t)}));this.scene=t,this.world=i;const n=Object.values(i.contactMaterialTable.data).filter(cn).reduce((s,a)=>{const[h,l]=a.materials;return s.set(h.name,h),s.set(l.name,l),s},new Map);be=n.get("general"),we=n.get("lowFriction"),Bo(this)}get mapElementIdList(){return Array.from(this.mapElementIdStore)}getBodyFromStore(t){return this.mapElementComponentStore.get(`${t}_body`)}getMeshFromStore(t){return this.mapElementComponentStore.get(`${t}_mesh`)}getPropsFromStore(t){return this.mapElementComponentStore.get(`${t}_props`)}getUpdateMethodFromStore(t){return this.mapElementComponentStore.get(`${t}_updateMethod`)}getAnimationPropsFromStore(t){return this.mapElementComponentStore.get(`${t}_animationProps`)}addToWorld(t,i,o){const n=`${o.type||o.shape}_${ve++}`,{type:s,mass:a=0,position_x:h=0,position_y:l=0,position_z:d=0,rotation_x:c=0,rotation_y:p=0,rotation_z:_=0,fixedRotation:x=!1}=o,C=()=>{i.position.copy(t.position),i.quaternion.copy(t.quaternion)};if(t.position.set(h,l,d),i.position.copy(t.position),i.name=n,(c||p||_)&&(t.quaternion.setFromEuler(T(c),T(p),T(_)),i.quaternion.copy(t.quaternion)),x&&(t.fixedRotation=!0,t.updateMassProperties()),this.world.addBody(t),this.scene.add(i),s==="animated"){const z=jo(t,o.dataSet);t.type=dt.KINEMATIC,z.triggerStart||t.velocity.set(z.velocity_x,z.velocity_y,z.velocity_z),this.mapElementComponentStore.set(`${n}_animationProps`,z),this.world.addEventListener("preStep",z.movementHandler)}return(a||s==="animated")&&this.world.addEventListener("postStep",C),t.aabbNeedsUpdate=!0,this.mapElementIdStore.add(n),this.mapElementComponentStore.set(`${n}_mesh`,i),this.mapElementComponentStore.set(`${n}_body`,t),this.mapElementComponentStore.set(`${n}_props`,o),this.mapElementComponentStore.set(`${n}_updateMethod`,C),this.editMode&&this.selectMapElement(n),n}toggleEditMode(){this.editMode=!this.editMode,this.editMode?this.mapElementIdList.forEach(t=>{this.setEventTriggerVisibility(t,!0)}):this.mapElementIdList.forEach(t=>{this.setEventTriggerVisibility(t,!1)}),this.listeners.dispatch("editModeChange",this.editMode)}clone(t){return this.build({...this.getPropsFromStore(t)})}build(t){const i=new Be({color:ln(t)}),o=t.lowFriction?we:be,n=new G({mass:t.mass,material:o});let s;if(on.includes(t.shape)&&!t.type&&(t.type="compound"),t.type==="compound")s=new Ae,fe(t).forEach(h=>{const[l,d]=Ct(h),c=new ht(d,i);f.renderShadows&&(c.castShadow=!0,c.receiveShadow=!0),St.set(T(h.rotation_x||0),T(h.rotation_y||0),T(h.rotation_z||0)),c.quaternion.setFromEuler(St),c.position.set(h.position_x,h.position_y,h.position_z),s.add(c),n.addShape(l,c.position,c.quaternion)});else{const[h,l]=Ct(t);n.addShape(h),s=new ht(l,i),f.renderShadows&&(s.castShadow=!0,s.receiveShadow=!0)}const a=this.addToWorld(n,s,t);return t.type==="trigger"&&this.setUpEventTrigger(a,t),a}setUpEventTrigger(t,i){const{event:o="setCameraPosition",dataSet:n="0,0,0"}=i,s=this.getBodyFromStore(t),a=this.getMeshFromStore(t),h=this.mapElementComponentStore.get(`${t}_listener`),l=({target:d,body:c})=>{this.eventTriggerListeners.dispatch(o,{target:d,dataSet:n,relatedTarget:c})};h&&s.removeEventListener(G.COLLIDE_EVENT_NAME,h),this.mapElementComponentStore.set(`${t}_listener`,l),s.collisionResponse=!1,s.addEventListener(G.COLLIDE_EVENT_NAME,l),$t(a,Qe,.3),a.castShadow=!1,a.receiveShadow=!1,this.editMode||(a.visible=!1)}convertEventTriggerToDefaultElement(t){const i=this.getBodyFromStore(t),o=this.getMeshFromStore(t),n=this.mapElementComponentStore.get(`${t}_listener`);i.removeEventListener(G.COLLIDE_EVENT_NAME,n),this.mapElementComponentStore.delete(`${t}_listener`),i.collisionResponse=!0,$t(o,re,1)}placeVehicle(t){const{position_x:i,position_y:o,position_z:n,rotation_x:s,rotation_y:a,rotation_z:h}=t;this.mapElementIdStore.add(nt),this.mapElementComponentStore.set(`${nt}_props`,{...t}),this.mapElementComponentStore.set(`${nt}_updateMethod`,()=>{const{position_x:l,position_y:d,position_z:c,rotation_x:p,rotation_y:_,rotation_z:x}=this.getPropsFromStore(nt);this.onPlaceVehicle(l,d,c,p,_,x)}),this.onPlaceVehicle(i,o,n,s,a,h)}setEventTriggerVisibility(t,i=!1){if(t.startsWith("trigger")){const o=this.getMeshFromStore(t);o.visible=i}}resetDynamicMapElements(){this.mapElementIdList.forEach(this.resetElementIfDynamic)}translate(t,i){const o=this.getBodyFromStore(t),n=this.getPropsFromStore(t),s=this.getUpdateMethodFromStore(t);if(Object.assign(n,{...i}),o){const{position_x:a=0,position_y:h=0,position_z:l=0,rotation_x:d=0,rotation_y:c=0,rotation_z:p=0}=n;o.position.set(a,h,l),o.quaternion.setFromEuler(T(d),T(c),T(p)),o.aabbNeedsUpdate=!0}s(),this.listeners.dispatch("mapElementChange",{...n})}transform(t,i){const o=this.getMeshFromStore(t),n=this.getBodyFromStore(t),s=this.getPropsFromStore(t);if(Object.assign(s,{...i}),n.shapes.length=0,n.shapeOffsets.length=0,n.shapeOrientations.length=0,Yt(o)){const a=fe(s),h=a.length,l=Math.max(0,o.children.length-h);for(let d=0;d<l;d++){const c=o.children.length-1,p=o.children[c];p.geometry.dispose(),o.remove(p)}for(let d=0;d<h;d++){const c=a[d],[p,_]=Ct(c);let x=o.children[d];x?x.geometry.dispose():(x=new ht,x.material=o.children[0].material,o.add(x)),St.set(T(c.rotation_x||0),T(c.rotation_y||0),T(c.rotation_z||0)),x.quaternion.setFromEuler(St),x.position.set(c.position_x,c.position_y,c.position_z),x.geometry=_,n.addShape(p,x.position,x.quaternion)}}else{const[a,h]=Ct(s);n.addShape(a),o.geometry.dispose(),o.geometry=h}this.listeners.dispatch("mapElementChange",{...s})}setAttribute(t,i){const o=this.getPropsFromStore(t),n=this.getBodyFromStore(t),s=o.type;if(Object.assign(o,{...i}),"color"in i&&$t(this.getMeshFromStore(t),i.color),s==="trigger"&&i.type==="default"?this.convertEventTriggerToDefaultElement(t):("type"in i||"event"in i||"dataSet"in i)&&(this.setUpEventTrigger(t,o),o.mass&&(i.mass=0)),"mass"in i){const a=this.getUpdateMethodFromStore(t);n.mass=i.mass,n.updateMassProperties(),n.velocity.set(0,0,0),n.angularVelocity.set(0,0,0),i.mass>0&&n.type===dt.STATIC?(n.type=dt.DYNAMIC,this.world.addEventListener("postStep",a)):!i.mass&&n.type===dt.DYNAMIC&&(n.type=dt.STATIC,this.world.removeEventListener("postStep",a))}this.listeners.dispatch("mapElementChange",{...o})}}function ze(e){e.geometry.dispose(),e.material.dispose()}function $t(e,t,i){const o=Yt(e)?e.children[0].material:e.material;t&&o.color.set(t),i&&(o.transparent=i<1,o.opacity=i)}function ln(e){return e.type==="trigger"?Qe:e.type==="animated"?Je:e.color?e.color:e.mass?Xe:re}function Yt(e){return!!e.children.length}function cn(e){return e instanceof ee}const dn=/checkpointCount:\w*(\d+)/i,gn=Math.PI*2,_n=.02;let ti=0,ei=0;class mn{constructor(t,i){r(this,"activeCheckpoints",new Set);r(this,"checkpointIconToElementLinks",new Map);r(this,"checkpointIcon3dPool");r(this,"finishIcon3d");r(this,"gameProgress");r(this,"scene");r(this,"checkpointEventHandler",({target:t,relatedTarget:i})=>{if(i===this.gameProgress.vehicle.chassisBody&&this.activeCheckpoints.has(t)){this.gameProgress.checkpointReached(t);const o=this.checkpointIconToElementLinks.get(t);this.checkpointIcon3dPool.release(o),this.activeCheckpoints.delete(t)}});r(this,"finishEventHandler",({target:t,relatedTarget:i,dataSet:o})=>{i===this.gameProgress.vehicle.chassisBody&&yn(o)===this.gameProgress.checkpointsReached&&(this.gameProgress.stop(),this.gameProgress.openModal())});this.scene=t,this.finishIcon3d=i.finish,this.checkpointIcon3dPool=new je(1,{itemProvider(){return i.checkpoint.clone()},itemActiveCheck(o){return o.visible},itemActivator(o){o.visible=!0},itemDeactivator(o){o.visible=!1}}),this.scene.add(this.finishIcon3d)}init(t,i){this.gameProgress=i,t.eventTriggerListeners.add(Q.checkpoint,this.checkpointEventHandler),t.eventTriggerListeners.add(Q.finish,this.finishEventHandler),this.checkpointIcon3dPool.activeCount&&this.checkpointIcon3dPool.releaseAll(),this.activeCheckpoints.size&&this.activeCheckpoints.clear(),t.mapElementIdList.forEach(o=>{if(o.startsWith("trigger")){const{event:n}=t.getPropsFromStore(o);n==="checkpoint"?this.setActiveCheckpoint(t.getBodyFromStore(o)):n==="finish"&&this.setFinish(t.getBodyFromStore(o))}})}setActiveCheckpoint(t){const i=this.checkpointIcon3dPool.obtain();i.position.copy(t.position),this.activeCheckpoints.add(t),this.checkpointIconToElementLinks.set(t,i),this.scene.add(i)}setFinish(t){this.finishIcon3d.position.copy(t.position)}updateVisuals(t){ti=Math.sin(t/1e3)/500,ei=.5*Math.sin(t/500)*.005,this.checkpointIcon3dPool.forActive(Ce),Ce(this.finishIcon3d)}}function un(){const e=new ht(new Ie(.8,.8,.8),new yt({color:0,specular:6710886,emissive:43520,shininess:10,transparent:!0,opacity:.6}));return e.rotation.set(Math.PI/4,0,Math.PI/4),e}function Ce(e){const t=e.rotation.y+_n;e.rotation.y=t>=gn?0:t,e.position.y+=ti,e.material&&e.material.emissive.offsetHSL(0,0,ei)}function yn(e){const[,t]=e.match(dn)||[];return t?Number(t):0}class xn{constructor(){r(this,"started",!1);r(this,"stopped",!1);r(this,"startTime",0);r(this,"stopTime",0);r(this,"relativeStopTime",0)}get time(){return this.stopped?this.relativeStopTime:performance.now()-this.startTime}start(){this.started=!0,this.stopped?this.startTime+=performance.now()-this.stopTime:this.startTime=performance.now(),this.stopped=!1}stop(){this.relativeStopTime=this.time,this.stopTime=performance.now(),this.stopped=!0}reset(){this.started=!1,this.stopped=!1,this.startTime=0}add(t){this.startTime-=t}}const fn={meta:{author:""},elements:[{type:"vehicle",position_y:1},{shape:"box",width:5,length:5,height:.2,position_y:-.1},{type:"trigger",shape:"sphere",event:"finish",dataSet:"",radius:1,position_x:3,position_y:1},{shape:"box",height:1,width:20,length:20,position_y:-2,type:"trigger",event:"reset"}]},wn={meta:{author:"",goals:{time:11e3,respawnCount:0},next:"i02"},elements:[{type:"vehicle",position_y:1},{shape:"sphere",type:"trigger",event:"setCameraMode",dataSet:"chase",radius:3,position_y:1},{shape:"box",width:10,length:10,height:.2,position_y:-.1},{type:"trigger",shape:"sphere",event:"finish",dataSet:"checkpointCount:1",radius:1,position_x:30,position_y:1},{shape:"box",width:10,length:20,height:.2,position_y:-.1,position_z:-15},{shape:"box",width:20,length:10,height:.2,position_y:-.1,position_x:15},{shape:"box",width:20,length:10,height:.2,position_y:-.1,position_z:-30},{shape:"box",width:10,length:20,height:.2,position_y:-.1,position_x:30},{shape:"box",width:4,length:10,height:.2,position_y:-.1,position_x:37},{shape:"box",width:10,length:4,height:.2,position_y:-.1,position_z:-37},{type:"trigger",shape:"sphere",event:"checkpoint",dataSet:"",radius:1,position_y:1,position_z:-30,rotation_y:180},{shape:"box",position_x:15,position_y:-2,position_z:-10,height:1,width:80,length:80,type:"trigger",event:"reset"}]},bn={meta:{author:"",goals:{time:11e3,respawnCount:0},next:"i03"},elements:[{type:"vehicle",position_y:1},{shape:"box",width:10,length:20,height:.2,position_y:-.1,position_x:0,position_z:-5,rotation_x:0,rotation_y:0,rotation_z:0},{shape:"sphere",type:"trigger",event:"setCameraMode",dataSet:"chase",radius:3,position_y:1},{type:"trigger",shape:"sphere",event:"finish",dataSet:"",radius:1,position_x:-26,position_y:4.66,position_z:0,rotation_x:0,rotation_y:0,rotation_z:0},{shape:"box",width:10,length:10,height:.2,position_y:-.54,position_x:0,position_z:-19.96,rotation_x:-5,rotation_y:0,rotation_z:0},{shape:"box",width:10,length:10,height:.2,position_y:-1.85,position_x:0,position_z:-29.85,rotation_x:-10,rotation_y:0,rotation_z:0},{shape:"box",width:10,length:10,height:.2,position_y:-3.15,position_x:0,position_z:-39.74,rotation_x:-5,rotation_y:0,rotation_z:0},{shape:"box",width:10,length:10.3,height:.2,position_y:-3.59,position_x:0,position_z:-49.86,rotation_x:0,rotation_y:0,rotation_z:0},{shape:"box",width:14,length:14,height:.2,position_y:-3.59,position_x:-3,position_z:-62,rotation_x:0,rotation_y:0,rotation_z:0},{shape:"box",width:20,length:4,height:.2,position_y:-3.59,position_x:-13,position_z:-71,rotation_x:0,rotation_y:0,rotation_z:0},{shape:"box",width:14,length:14,height:.2,position_y:-3.59,position_x:-23,position_z:-62,rotation_x:0,rotation_y:0,rotation_z:0},{shape:"box",width:6,length:10,height:.2,position_y:-3.59,position_x:-13,position_z:-64,rotation_x:0,rotation_y:0,rotation_z:0},{shape:"box",width:10,length:20,height:.2,position_y:-3.59,position_x:-26,position_z:-45,rotation_x:0,rotation_y:0,rotation_z:0},{shape:"box",width:10,length:10,height:.2,position_y:-2.72,position_x:-26,position_z:-30.09,rotation_x:-10,rotation_y:0,rotation_z:0},{shape:"box",width:10,length:10,height:.2,position_y:-.15,position_x:-26,position_z:-20.49,rotation_x:-20,rotation_y:0,rotation_z:0},{shape:"box",width:10,length:10,height:.2,position_y:2.42,position_x:-26,position_z:-10.89,rotation_x:-10,rotation_y:0,rotation_z:0},{shape:"box",width:10,length:10,height:.2,position_y:3.28,position_x:-26,position_z:-.99,rotation_x:0,rotation_y:0,rotation_z:0},{shape:"box",height:1,width:80,length:140,position_x:-15,position_y:-5,position_z:-35,type:"trigger",event:"reset"}]},vn={meta:{author:"",goals:{time:3e4,respawnCount:0},next:"o01"},elements:[{type:"vehicle",position_y:1,position_z:8},{shape:"box",width:22,length:32,height:.2,position_y:-.1},{type:"trigger",shape:"sphere",event:"finish",dataSet:"",radius:1,position_x:-8,position_y:5,position_z:0},{shape:"box",width:6,height:4,length:5,position_x:0,position_y:2,position_z:.5,color:"#95c0e5",fixedRotation:!0,mass:20},{shape:"box",width:8,height:4,length:5,position_x:-7,position_y:2,position_z:.5,lowFriction:!0},{shape:"box",width:8,height:4,length:5,position_x:7,position_y:2,position_z:.5,lowFriction:!0},{shape:"box",width:5,height:2,length:14,position_x:8.5,position_y:1,position_z:-9},{shape:"triangularPrism",position_x:8.5,position_y:3,position_z:-5,offset:3,height:2,width:5,length:6},{shape:"triangularPrism",position_x:4,position_y:1,position_z:-13.5,rotation_y:90,offset:2,height:2,width:5,length:4},{shape:"box",position_x:3.1,position_y:3.9,position_z:-6.5,length:9,width:.2,height:.2,color:"#757575",lowFriction:!0},{shape:"box",position_x:-3.1,position_y:3.9,position_z:-6.5,length:9,width:.2,height:.2,color:"#757575",lowFriction:!0},{shape:"box",position_x:0,position_y:3.9,position_z:-10.9,length:.2,width:6,height:.2,color:"#757575",lowFriction:!0},{shape:"box",height:1,width:60,length:60,position_x:0,position_y:-2,position_z:-2,type:"trigger",event:"reset"}]},zn={meta:{author:"",goals:{time:4e4,respawnCount:0},next:"o02"},elements:[{type:"vehicle",position_x:10,position_y:1,position_z:10,rotation_y:90},{shape:"sphere",type:"trigger",event:"setCameraMode",dataSet:"cinematic,25,11,25",radius:3,position_x:10,position_y:1,position_z:10},{shape:"box",width:30,height:.2,length:34,position_x:6,position_z:2},{shape:"triangularPrism",position_x:-3,position_y:1.1,position_z:-3,rotation_x:0,rotation_y:0,rotation_z:0,length:4,width:4,offset:-2},{shape:"triangularPrism",position_x:-3,position_y:4.1,position_z:-7,rotation_x:0,rotation_y:0,rotation_z:0,length:4,width:4,offset:-2,height:4},{shape:"box",width:4,height:.2,length:6,position_x:-3,position_y:10,position_z:-18},{shape:"box",width:4,height:.2,length:30,position_x:-3,position_y:5,position_z:-25,rotation_x:15},{shape:"box",width:4,height:5.4,length:2,position_x:-7,position_y:2.6,position_z:-9},{shape:"box",width:4,height:11.8,length:2,position_x:1,position_y:5.9,position_z:-9},{shape:"box",mass:40,position_x:11,position_y:3.1,position_z:-6,width:4,height:4,length:4},{shape:"cylinder",sides:4,radiusBottom:13,height:1,position_x:9,position_y:.6,position_z:-4,rotation_y:45,radiusTop:10},{shape:"cylinder",radiusTop:2,radiusBottom:2,height:4,mass:20,sides:20,position_x:-3,position_y:15,position_z:-27,rotation_z:90},{shape:"box",width:.2,height:1,length:10,position_x:-5.1,position_y:11.3,position_z:-33,lowFriction:!0},{shape:"box",width:.2,height:1,length:14,position_x:-.9,position_y:11.3,position_z:-31,lowFriction:!0},{shape:"box",width:.2,height:1,length:30,position_x:-.9,position_y:5.5,position_z:-25,rotation_x:15,lowFriction:!0},{shape:"box",width:.2,height:1,length:30,position_x:-5.1,position_y:5.5,position_z:-25,rotation_x:15,lowFriction:!0},{shape:"box",width:8.2,height:.2,length:4,position_x:-8.92,position_y:9.65,position_z:-26,rotation_z:14.8},{shape:"box",width:4,height:.2,length:2.4,position_x:-7,position_y:5.2,position_z:-11.2},{shape:"triangularPrism",position_x:-7,position_y:8.6,position_z:-9,rotation_x:-90,rotation_y:-90,rotation_z:0,length:4,width:6.6,offset:-2,height:2},{shape:"box",width:4,height:.2,length:4.4,position_x:-10.95,position_y:5.55,position_z:-10.2,rotation_z:-10},{shape:"box",width:4,height:.2,length:4,position_x:-14.9,position_y:5.9,position_z:-10},{shape:"box",width:4,height:.2,length:12.4,position_x:-14.9,position_y:7.25,position_z:-17.98,rotation_x:12.55},{shape:"box",width:4.1,height:.2,length:4,position_x:-14.85,position_y:8.6,position_z:-26},{shape:"box",width:4,height:.2,length:2.4,position_x:1,position_y:5.2,position_z:-11.2},{shape:"box",width:4,height:.2,length:3.3,position_x:-3,position_y:10.35,position_z:-22.33,rotation_x:12.5},{shape:"box",width:4,height:.2,length:5,position_x:-3,position_y:10.7,position_z:-26.4},{shape:"box",width:.2,height:2,length:14,position_x:-.9,position_y:10.8,position_z:-17},{shape:"box",width:4,height:.2,length:4.4,position_x:5,position_y:5.2,position_z:-10.2},{shape:"box",width:4,height:4,length:3.8,position_x:5,position_y:3.1,position_z:-1.9},{shape:"box",width:4,height:.2,length:.2,position_x:9,position_z:-3.9,position_y:1.2,lowFriction:!0},{shape:"box",width:4,height:4,length:.2,position_x:5,position_z:-3.9,position_y:3.1,lowFriction:!0},{shape:"box",width:8,height:.2,length:.2,position_x:7,position_z:-8.1,position_y:1.2,lowFriction:!0},{shape:"box",width:.2,height:.2,length:4,position_x:2.9,position_z:-6,position_y:1.2},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"34,11,4.5",radius:7,position_x:14,position_y:1},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"-3,9,29",radius:7,position_x:-2,position_y:1,position_z:8},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"-30,16,-3",radius:3,position_x:-3,position_y:12,position_z:-21},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"-30,22,-29",radius:3,position_x:-15,position_y:9,position_z:-22,rotation_x:0,rotation_y:0,rotation_z:0},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"-27,14,-13",radius:2,position_x:-9,position_y:6,position_z:-10},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"9.5,10,-25",radius:2,position_x:1,position_y:6,position_z:-11},{type:"trigger",shape:"sphere",event:"checkpoint",dataSet:"-30,22,-29",radius:1,position_x:-15,position_y:9.7,position_z:-26.19,rotation_x:0,rotation_y:180,rotation_z:0},{type:"trigger",shape:"sphere",event:"finish",dataSet:"checkpointCount:1",radius:1,position_x:5,position_y:6,position_z:-2},{shape:"box",height:1,width:60,length:80,position_y:-2,position_z:-10,type:"trigger",event:"reset"}]},Cn={meta:{author:"",goals:{time:35e3,respawnCount:0},next:"o03"},elements:[{type:"vehicle",position_x:10,position_y:1,position_z:10,rotation_y:90},{shape:"box",width:12,height:.2,length:10,position_x:8,position_z:10},{shape:"triangularPrism",width:4,length:4,offset:-2,position_x:8,position_y:1,position_z:7},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"39,13,-6",radius:3,position_x:13,position_y:1,position_z:10},{type:"animated",shape:"box",width:6,height:.2,length:6,position_x:-1,position_z:10,dataSet:'{ "movement": { "y": -17 }, "alternateDelay": 3, "triggerStart": true }'},{shape:"box",width:1,height:18,length:.2,position_x:-3,position_y:-8.1,position_z:6.9},{shape:"box",width:1,height:18,length:.2,position_x:1,position_y:-8.1,position_z:6.9},{shape:"box",width:1,height:18,length:.2,position_x:1,position_y:-8.1,position_z:13.1},{shape:"box",width:1,height:18,length:.2,position_x:-3,position_y:-8.1,position_z:13.1},{shape:"box",width:.2,height:18,length:.6,position_x:-4.1,position_y:-8.1,position_z:12},{shape:"box",width:.2,height:18,length:.6,position_x:-4.1,position_y:-8.1,position_z:8},{shape:"box",width:12,height:.2,length:10,position_x:8,position_z:10,position_y:-17},{shape:"box",width:.2,height:14,length:6,position_x:2.1,position_y:-7.1,position_z:10,color:12895428},{shape:"box",width:12,height:.2,length:10,position_x:8,position_z:21},{shape:"box",width:4,height:10,length:.6,position_x:8,position_z:15.5,position_y:-1,mass:40,lowFriction:!0,fixedRotation:!0},{shape:"box",width:4,height:14,length:1,position_x:4,position_z:15.5,position_y:-3},{shape:"box",width:4,height:14,length:1,position_x:12,position_z:15.5,position_y:-3},{shape:"box",width:1,height:1,length:2,position_x:8,position_z:15.5,position_y:-6.5,mass:10,lowFriction:!0,fixedRotation:!0},{shape:"box",width:2,height:1,length:3,position_x:8,position_z:13.5,position_y:-7.5},{shape:"box",width:2,height:1,length:2,position_x:8,position_z:17,position_y:-7.5},{shape:"box",width:2,height:1,length:2,position_x:8,position_z:17,position_y:-5.5},{shape:"box",width:.5,height:1,length:2,position_x:7.25,position_z:17,position_y:-6.5},{shape:"box",width:.5,height:1,length:2,position_x:8.75,position_z:17,position_y:-6.5},{shape:"box",width:10,height:.2,length:8,position_x:9,position_z:9,position_y:-8},{shape:"box",width:4,height:6,length:.2,position_x:8,position_z:15.1,position_y:-3},{shape:"box",width:4,height:6,length:.2,position_x:8,position_z:15.9,position_y:-3},{shape:"box",width:.5,height:1,length:3,position_x:8.75,position_z:13.5,position_y:-6.5},{shape:"box",width:.5,height:1,length:3,position_x:7.25,position_z:13.5,position_y:-6.5},{shape:"box",width:5,height:2,length:1,position_x:4.5,position_z:15.5,position_y:-11},{shape:"box",width:5,height:2,length:1,position_x:11.5,position_z:15.5,position_y:-11},{shape:"box",width:12,height:5,length:1,position_x:8,position_z:15.5,position_y:-14.5},{shape:"sphere",radius:.5,position_x:8,position_z:14,position_y:-6.5,mass:1},{shape:"box",width:2,height:1,length:3,position_x:8,position_y:-5.5,position_z:13.5},{shape:"box",width:1,height:1,length:3,position_x:8,position_z:11.75,position_y:-6.5,mass:10,fixedRotation:!0},{shape:"box",width:4,height:.2,length:4,position_x:16,position_z:7,position_y:-17},{shape:"box",width:8,height:.2,length:4,position_x:18,position_z:7,position_y:-8},{shape:"box",width:4,height:.2,length:26,position_x:20,position_z:21.75,position_y:-10.25,rotation_x:10},{shape:"box",width:4,height:.2,length:26,position_x:16,position_z:21.6,position_y:-14.75,rotation_x:-10},{shape:"box",width:8,height:.2,length:4,position_x:18,position_z:36.35,position_y:-12.5},{shape:"box",width:4,height:.2,length:26,position_x:16,position_z:21.6,position_y:-5.76,rotation_x:-10},{shape:"box",width:4,height:.2,length:4,position_x:16,position_z:36.35,position_y:-3.5},{shape:"box",width:2,height:3,length:1,position_x:8,position_y:-6.5,position_z:18.5},{shape:"box",width:4,height:.2,length:4,position_x:4,position_z:36.35,position_y:-2},{shape:"box",width:4,height:.2,length:8.8,position_x:4,position_z:30.2,position_y:-1,rotation_x:13.4},{shape:"box",width:8.2,height:.2,length:4,position_x:10,position_z:36.35,position_y:-2.75,rotation_z:-10.5},{shape:"box",width:.2,height:4,length:.2,position_x:6.1,position_z:15.1,position_y:2},{shape:"box",width:.2,height:4,length:.2,position_x:9.9,position_z:15.1,position_y:2},{shape:"box",width:.2,height:4,length:.2,position_x:9.9,position_z:15.9,position_y:2},{shape:"box",width:.2,height:4,length:.2,position_x:6.1,position_z:15.9,position_y:2},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"-13,4,1",radius:3,position_x:-1,position_y:1,position_z:10},{shape:"box",width:4,height:.2,length:12,position_x:8,position_z:-17,position_y:2},{type:"trigger",shape:"sphere",event:"finish",dataSet:"checkpointCount:1",position_x:8,position_y:3,position_z:-21},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"-21,-9,8",radius:3,position_x:-1,position_y:-9,position_z:10},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"19,-10,-11",radius:3,position_x:6,position_y:-16,position_z:10},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"30,-3,52",radius:3,position_x:16,position_y:-13,position_z:23},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"43,2,0",radius:3,position_x:16,position_y:-14,position_z:17},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"32,8,-11",radius:3,position_x:20,position_y:-9,position_z:20},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"27,7,43",radius:3,position_x:16,position_y:-4,position_z:26},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"8,12,52",radius:3,position_x:9,position_y:-2,position_z:36},{shape:"box",width:.2,height:.4,length:1.9,position_y:1.1,position_z:11.35,position_x:-4.1},{shape:"box",width:.8,height:.2,length:.8,position_y:1.4,position_z:10,position_x:-4.4},{shape:"box",width:.6,height:.4,length:.2,position_y:1.1,position_z:10.3,position_x:-4.3},{shape:"box",width:.6,height:.4,length:.2,position_y:1.1,position_z:9.7,position_x:-4.3},{shape:"box",width:.8,height:.2,length:.8,position_y:.8,position_z:10,position_x:-4.4},{shape:"box",width:.2,height:.4,length:.8,position_y:1.1,position_z:10,position_x:-4.7},{shape:"box",width:.6,height:.4,length:.4,position_y:1.1,position_z:10,position_x:-4.1,mass:10},{shape:"box",width:.2,height:.4,length:.4,position_y:1.1,position_z:10,position_x:-3.9,type:"trigger",event:"startAnimation",dataSet:"animated_3"},{type:"trigger",shape:"sphere",event:"checkpoint",position_x:10.75,position_y:-7,position_z:7.5,rotation_y:-90},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"32,8,-11",radius:3,position_x:14.09,position_y:-7,position_z:10.04},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"38,15,11",radius:3,position_x:8,position_y:3,position_z:1},{shape:"box",height:1,width:60,length:80,position_x:10,position_y:-19,position_z:12,type:"trigger",event:"reset"},{shape:"box",height:1,width:40,length:40,position_x:10,position_y:-5,position_z:-35,type:"trigger",event:"reset"}]},Sn={meta:{author:"",goals:{time:22e3},next:"o04"},elements:[{type:"vehicle",position_y:1,rotation_y:-1},{shape:"box",width:3*2,height:.1*2,length:20.01*2,position_z:-.02,position_y:.07},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"-6,10,26",radius:3,position_y:1},{type:"trigger",shape:"sphere",event:"finish",dataSet:"",radius:1,position_x:-31.5,position_y:17.5,position_z:-13.5},{shape:"slopeTransition",type:"compound",segmentWidth:6,position_y:0,position_z:-20.6,position_x:-3,segmentCount:43,segmentHeight:.22,segmentLength:.6,rotation_x:-6},{shape:"loop",type:"compound",segmentCount:23,segmentWidth:12,segmentHeight:.2,radius:10,segmentPositionOffset:-1.19,position_x:11.85,position_z:-41.48,position_y:.5,rotation_y:-30,rotation_z:-90},{shape:"box",height:6*2,length:15*2,width:.1*2,position_y:26.7,position_x:22.01,position_z:-27},{shape:"loop",type:"compound",segmentCount:7,segmentWidth:12,segmentHeight:.2,segmentLength:2,segmentPositionOffset:0,position_x:13.95,position_z:-18,position_y:20.4,rotation_y:-90},{shape:"box",height:.1*2,length:6*2,width:15*2,position_y:12.4,position_x:-2,position_z:-18},{shape:"loop",type:"compound",segmentCount:8,segmentWidth:8,segmentHeight:.2,radius:10,segmentPositionOffset:-1,position_x:-19,position_y:22.4,position_z:-16,rotation_y:90},{shape:"loop",type:"compound",segmentCount:7,segmentWidth:8,segmentHeight:.2,segmentPositionOffset:-1,radius:8,position_x:-20.59,position_y:24.16,position_z:-2,rotation_y:-90},{shape:"box",height:.1*2,length:3*2,width:6*2,position_y:16.16,position_x:-28.6,position_z:-2},{shape:"box",height:.1*2,length:6*2,width:3*2,position_y:16.16,position_x:-31.6,position_z:-11},{type:"trigger",shape:"sphere",event:"setCameraMode",dataSet:"chase",radius:3,position_y:1,position_z:-11.4},{shape:"box",type:"trigger",position_y:15.5,position_z:-18,width:1*2,length:6*2,height:3*2,event:"setCameraMode",dataSet:"hood"},{shape:"box",type:"trigger",position_y:18.26,position_z:-2,width:1*2,length:3*2,height:2*2,position_x:-26.8,event:"setCameraMode",dataSet:"cinematic,-16,21,-2"},{shape:"box",height:2*2,length:1*2,width:3*2,position_y:18.26,position_x:-31.6,position_z:-6,type:"trigger",dataSet:"-26,26,13"},{shape:"box",height:1,width:80,length:120,position_x:12,position_y:-5,position_z:-15,type:"trigger",event:"reset"},{shape:"box",height:1,width:60,length:60,position_x:-45,position_y:7,position_z:-10,type:"trigger",event:"reset"}]},Mn={meta:{author:"",goals:{time:55e3,respawnCount:0},next:"o05"},elements:[{type:"vehicle",position_y:11,rotation_y:-90,position_x:-5,position_z:8},{shape:"box",position_y:12,width:4,height:.2,length:4,position_x:4},{shape:"box",position_y:11.01,width:4,height:.2,length:4,position_x:.32,rotation_z:30},{shape:"box",position_y:9.67,width:4.2,height:.2,length:4,position_x:-7.41,rotation_z:-10},{shape:"box",position_y:9.67,width:4.2,height:.2,length:4,position_x:-3.38,rotation_z:10},{shape:"box",position_y:11.01,width:4,height:.2,length:4,position_x:-11.1,rotation_z:-30},{shape:"box",position_y:13.51,width:4,height:.2,length:4,position_x:-14.1,rotation_z:-50},{shape:"box",position_y:18.47,width:8,height:.2,length:4,position_x:-17.36,rotation_z:-60},{shape:"box",position_y:23.44,width:4,height:.2,length:4,position_x:-20.63,rotation_z:-50},{shape:"box",position_y:26.24,width:4,height:.2,length:4,position_x:-23.43,rotation_z:-40},{shape:"box",position_y:28.19,width:4,height:.2,length:4,position_x:-26.81,rotation_z:-20},{shape:"box",position_y:28.87,width:10,height:.2,length:10,position_x:-33.65},{shape:"box",position_y:19,width:8,height:.2,length:4,position_x:36.53,rotation_z:10,position_z:0},{shape:"box",position_y:16.31,width:8,height:.2,length:4,position_x:29.16,rotation_z:30},{shape:"box",position_y:8.576,width:12,height:.2,length:12,position_x:10.858,position_z:4,rotation_z:-35},{shape:"box",position_y:10,width:8,height:8,length:4,position_x:4,position_z:4},{shape:"box",position_y:12,width:4,height:.2,length:4,position_x:4,position_z:8},{shape:"box",position_y:11.013,width:4,height:.2,length:4,position_x:.318,rotation_z:30,position_z:8},{shape:"box",position_y:10,width:6,height:.2,length:4,position_x:-4.35,position_z:8},{shape:"box",position_y:21.06,width:8,height:.2,length:4,position_x:44.18,position_z:0,rotation_z:20},{shape:"box",position_y:23.9,width:6,height:.2,length:12,position_x:50.48,position_z:4,rotation_z:30},{shape:"sphere",type:"trigger",event:"checkpoint",position_x:-34.15,position_y:30.14,rotation_y:-90},{shape:"sphere",type:"trigger",event:"finish",dataSet:"checkpointCount:1",position_x:50.18,position_y:24.88,position_z:8.54},{shape:"sphere",type:"trigger",event:"setCameraMode",dataSet:"cinematic,26,20,43",position_x:-5,position_y:11,position_z:8,radius:2},{shape:"sphere",type:"trigger",dataSet:"25,22,18",position_x:4,position_y:13,position_z:8,radius:2},{shape:"sphere",type:"trigger",event:"setCameraMode",dataSet:"chase",position_x:10.01,position_y:9.92,position_z:1.67,radius:3},{shape:"box",height:1,width:150,length:60,position_x:20,position_y:4,position_z:5,type:"trigger",event:"reset"}]},Pn={meta:{author:"",goals:{time:45e3,respawnCount:0},next:"o06"},elements:[{type:"vehicle",position_y:1},{shape:"box",width:7,height:.1,length:30,position_z:-11.5},{shape:"sphere",type:"trigger",event:"setCameraMode",dataSet:"chase",position_y:1},{shape:"box",position_x:-1.5,position_y:.6,position_z:-8,width:3,height:1},{shape:"box",position_x:1.5,position_y:.6,position_z:-18,width:3,height:1},{shape:"box",position_y:-2.62,position_z:-38.18,rotation_x:-10,width:7,length:6,height:.1},{shape:"box",position_x:0,position_y:-6,position_z:-57,width:6,length:10,height:.1},{shape:"slopeTransition",type:"compound",position_x:-3,position_y:-6.05,position_z:-65.66,angle:30,segmentHeight:.84,segmentLength:3.69,segmentCount:5,segmentWidth:6},{shape:"cantedCurve",type:"compound",position_x:20.33,position_y:-3.94,position_z:-78.94,rotation_y:-90,segmentCount:36,radius:20,segmentWidth:6,segmentLength:1.53,angle:40},{shape:"box",position_x:41.83,position_y:-2.69,position_z:-75.18,rotation_z:40,width:10,length:6,height:.1},{shape:"box",position_x:48.63,position_y:.51,position_z:-63.18,width:6,length:30,height:.1},{shape:"sphere",type:"trigger",event:"checkpoint",position_x:48.5,position_y:1.74,position_z:-74.9,rotation_y:180},{shape:"loop",type:"compound",position_x:52.63,position_y:8.5,position_z:-42,rotation_y:-90,segmentPositionOffset:0,segmentCount:7,segmentLength:2,segmentWidth:30},{shape:"loop",type:"compound",position_x:30.68,position_y:11.8,position_z:-25.54,rotation_x:180,rotation_z:90,segmentCount:16,segmentPositionOffset:0,radius:30,segmentWidth:8,segmentLength:3},{shape:"box",position_x:60.68,position_y:12.3,position_z:-34,rotation_z:90,width:7,length:14,height:.1},{shape:"box",position_x:23.17,position_y:11.77,position_z:4.49,width:17,length:.1,height:8},{shape:"loop",type:"compound",position_x:-14.87,position_y:8.5,position_z:-3.5,rotation_x:-180,rotation_y:0,rotation_z:-180,segmentPositionOffset:-1.2,segmentCount:32,segmentLength:2,segmentWidth:18},{shape:"box",position_x:-67,position_y:4.47,position_z:-73,rotation_y:-60,width:40,height:.1,length:20},{shape:"loop",type:"compound",position_x:-16,position_y:12.49,position_z:-5.46,segmentCount:4,radius:12,segmentLength:2,segmentWidth:18,segmentPositionOffset:0},{shape:"box",position_x:-79,position_y:5.33,position_z:-94,rotation_y:-60,rotation_z:-10,width:10,height:.1,length:20},{shape:"box",type:"trigger",event:"finish",dataSet:"checkpointCount:1",length:5,position_x:-79,position_y:6.75,position_z:-93,rotation_y:-60},{shape:"box",height:1,width:150,length:150,position_x:20,position_y:-8,position_z:-40,type:"trigger",event:"reset"},{shape:"box",height:1,width:120,length:70,position_x:-72,position_y:0,position_z:-80,type:"trigger",event:"reset",rotation_y:-60}]},En={meta:{author:"",goals:{time:45e3,respawnCount:0},next:"o07"},elements:[{type:"vehicle",position_y:11.5},{shape:"box",width:5,length:5,height:1,position_y:10},{shape:"box",width:8,length:6,height:1,position_y:-8,position_z:2},{shape:"box",position_y:-18,position_z:-1,height:1,width:10,length:10},{shape:"box",position_y:-22,position_z:17,height:1,width:10,length:10},{shape:"sphere",type:"trigger",event:"checkpoint",position_y:-6.5,position_z:2},{shape:"box",color:10853513,height:.2,width:16,length:12,position_x:3,position_y:-12,position_z:17,rotation_x:-30},{shape:"box",position_x:8,position_y:-23,position_z:17,height:1,width:6,length:4},{shape:"box",position_x:14,position_y:-24,position_z:17,height:1,width:6,length:4},{shape:"sphere",type:"trigger",event:"checkpoint",position_x:8,position_y:-21,position_z:17,rotation_y:-90},{shape:"box",position_x:18,position_y:-25,position_z:13,height:1,width:4,length:6},{shape:"box",position_x:18,position_y:-26,position_z:7,height:1,width:4,length:6},{shape:"box",position_x:14,position_y:-27,position_z:3,height:1,width:6,length:4},{shape:"box",position_x:8,position_y:-28,position_z:3,height:1,width:6,length:4},{shape:"sphere",type:"trigger",event:"setCameraPosition",dataSet:"32,-13,25",position_x:10,position_y:-21,position_z:17},{shape:"box",type:"trigger",dataSet:"-24,-13,20",height:2,length:1,width:6,position_x:0,position_y:-20,position_z:14},{shape:"sphere",type:"trigger",event:"setCameraPosition",dataSet:"32,-13,-8",position_x:18,position_y:-24,position_z:9,rotation_y:-90},{shape:"box",position_x:-2,position_y:-31,position_z:4,height:1,width:6,length:6},{shape:"sphere",type:"trigger",event:"checkpoint",position_x:8,position_y:-26,position_z:3,rotation_y:90},{shape:"box",position_x:-2,position_y:-35,position_z:16,height:1,width:6,length:6},{shape:"box",position_x:-2,position_y:-39,position_z:27,height:1,width:6,length:6},{shape:"sphere",type:"trigger",event:"setCameraMode",dataSet:"cinematic,-24,25,0",position_y:12},{shape:"sphere",type:"trigger",event:"setCameraPosition",dataSet:"-2,-20,-10",position_x:-2,position_y:-29,position_z:4},{shape:"sphere",type:"trigger",event:"setCameraPosition",dataSet:"-35,-3,1",position_x:0,position_y:-6.5,position_z:2},{shape:"sphere",type:"trigger",event:"setCameraPosition",dataSet:"6,-21,-20",position_x:10,position_y:-26,position_z:3},{type:"trigger",shape:"sphere",event:"finish",dataSet:"checkpointCount:3",radius:1,position_x:-2,position_y:-37,position_z:27},{shape:"box",height:1,width:100,length:100,position_x:0,position_y:-40,position_z:10,type:"trigger",event:"reset"}]},Ln={meta:{author:"",goals:{time:2e4},next:"o08"},elements:[{type:"vehicle",position_y:1.4},{shape:"box",width:8,length:16,height:.2,position_y:-.6},{shape:"cylinder",sides:4,radiusTop:3,radiusBottom:5.7,height:1,rotation_y:45},{shape:"box",width:8,length:16,height:.2,position_z:20,position_x:0,position_y:0,rotation_x:0,rotation_y:0,rotation_z:0},{shape:"box",width:8,length:16,height:.2,position_z:-20},{shape:"box",width:16,length:10,height:.2,position_y:-.6,position_x:-12,position_z:-3,rotation_x:0,rotation_y:0,rotation_z:0},{type:"compound",shape:"loop",position_x:-20.89,position_y:9.9,position_z:-3,rotation_y:90,segmentPositionOffset:0,segmentCount:7,segmentLength:2.64,segmentWidth:10,segmentHeight:.2,radius:10.5},{type:"compound",shape:"loop",position_x:-20.89,position_y:10.5,position_z:20,rotation_y:90,segmentPositionOffset:0,segmentCount:7,segmentLength:2.64,segmentWidth:16,segmentHeight:.2,radius:10.5},{shape:"box",width:16,length:16,height:.2,position_z:20,position_x:-12},{type:"trigger",shape:"sphere",event:"finish",dataSet:"",radius:1,position_y:1,position_z:-25},{type:"trigger",shape:"box",position_x:-5,position_y:1,position_z:-3,width:1,length:8,dataSet:"-8,27,-33"},{type:"trigger",shape:"box",dataSet:"-27, 29, 47",position_x:-19,position_y:1,position_z:20,width:1,length:14},{type:"trigger",shape:"box",dataSet:"0,10,40",position_x:-10,position_y:1,position_z:20,width:1,length:14},{type:"trigger",shape:"box",event:"setCameraMode",dataSet:"cinematic,24,8,0",width:1,height:1,length:1,position_y:.5},{shape:"box",position_x:-29,position_y:9,position_z:6,type:"trigger",width:5,height:10,length:1,dataSet:"-34,23,3"},{shape:"box",position_y:1,position_z:10,type:"trigger",event:"setCameraMode",dataSet:"chase",width:5,height:2,length:1},{shape:"box",height:1,width:100,length:100,position_x:-15,position_y:-2,position_z:-4,type:"trigger",event:"reset"}]},kn={meta:{author:"",goals:{time:3e4,respawnCount:0},next:"o09"},elements:[{type:"vehicle",position_y:1,position_z:16},{shape:"box",width:6,length:38,height:.2,position_y:-.1,position_x:0,position_z:1,rotation_x:0,rotation_y:0,rotation_z:0},{type:"animated",shape:"box",width:6,height:4,length:6,position_y:2,position_z:7,dataSet:'{ "movement": { "x": 10 }, "speed": 10, "triggerStart": false }'},{type:"animated",shape:"box",width:6,height:4,length:6,position_y:2,position_z:-9,dataSet:'{ "movement": { "x": 10 }, "speed": 10, "triggerStart": false }'},{shape:"box",height:.2,width:6,length:10,position_x:10,position_y:3.9,position_z:-1},{shape:"box",height:.2,width:6,length:6,position_x:10,position_y:3.9,position_z:-15},{shape:"box",height:.2,width:6,length:10,position_x:10,position_y:3.033,position_z:-22.9,rotation_x:-10},{shape:"box",height:.2,width:6,length:10,position_y:.764,position_z:-22.92,rotation_x:10},{shape:"box",height:.2,width:6,length:6,position_y:1.63,position_z:-30.82},{shape:"box",height:.2,width:6,length:6,position_x:10,position_y:2.16,position_z:-30.82},{shape:"box",height:.2,width:4.05,length:6,position_x:5.01,position_y:1.895,position_z:-30.82,rotation_z:7.47},{shape:"box",height:.2,width:6,length:9,position_x:10,position_y:3.9,position_z:14.5,rotation_x:0,rotation_y:0,rotation_z:0},{shape:"sphere",position_x:10,position_y:3.45,position_z:-30.82,rotation_y:180,type:"trigger",event:"checkpoint"},{type:"trigger",shape:"sphere",event:"finish",radius:2,dataSet:"checkpointCount:1",position_x:10,position_y:5,position_z:16,rotation_x:0,rotation_y:0,rotation_z:0},{type:"trigger",shape:"sphere",event:"setCameraMode",dataSet:"cinematic,-23.677403301734017 , 18.14983153689501 , 19.110973303515554",radius:3,position_y:1,position_z:16},{type:"trigger",shape:"sphere",radius:3,dataSet:"-30.215800024784016, 22.38223498976879, 8.370897885782714",position_y:1,position_z:2},{type:"trigger",shape:"sphere",radius:3,dataSet:"-13.569674761319714, 16.522559296321283, -50.07904465318648",position_y:1,position_z:-15},{shape:"sphere",position_x:10,position_y:3.45,position_z:-30.82,rotation_y:180,type:"trigger",event:"setCameraPosition",radius:3,dataSet:"18.770735429093357, 20.96953167533059, -46.35856186137107"},{shape:"box",height:1,width:50,length:100,position_x:10,position_y:-2,position_z:-4,type:"trigger",event:"reset"}]},Tn={meta:{author:"",goals:{time:2e4},next:"o10"},elements:[{type:"vehicle",position_y:11.4,position_x:1.5},{shape:"box",width:10,length:6,height:1,position_y:9.95,position_z:.3},{shape:"box",position_y:2.51,position_z:-15.44,rotation_x:-30,height:1,width:10,length:30},{shape:"box",position_x:-8,position_y:-25,position_z:-65,rotation_x:-30,height:1,width:10,length:60},{shape:"box",position_y:-56,position_z:-130,rotation_x:-20,height:1,width:10,length:60},{shape:"box",width:10,height:1,position_y:-5.18,position_z:-29.26,rotation_x:-15},{shape:"box",width:10,height:1,position_x:-8,position_y:-40.17,position_z:-91.78,rotation_x:-15},{shape:"box",position_y:-66.31,position_z:-159,rotation_x:-5,width:10,height:1},{shape:"box",position_x:8,position_y:-76,position_z:-200,rotation_x:-10,height:1,width:10,length:60},{shape:"box",position_y:-83,position_z:-271,height:1,width:10,length:60},{shape:"box",position_x:8,position_y:-81.08,position_z:-230.38,rotation_x:5,width:10,height:1},{type:"trigger",shape:"sphere",event:"finish",dataSet:"",radius:2,position_y:-81,position_z:-297},{type:"trigger",shape:"box",event:"setCameraMode",dataSet:"cinematic,-5,24,19",position_y:12},{type:"trigger",shape:"box",event:"setCameraMode",dataSet:"chase",height:2,width:8,length:1,position_y:11,position_x:0,position_z:-4},{shape:"box",height:1,width:70,length:200,position_x:0,position_y:-37,position_z:-67,type:"trigger",event:"reset",rotation_x:-25},{shape:"box",height:1,width:70,length:200,position_x:0,position_y:-85,position_z:-265,type:"trigger",event:"reset"}]},Fn={meta:{author:"",goals:{time:45e3}},elements:[{type:"vehicle",position_x:0,position_y:1.6,position_z:-4},{type:"trigger",shape:"sphere",event:"finish",dataSet:"",radius:1,position_x:-16,position_y:5.5,position_z:-10},{shape:"box",color:11194623,fixedRotation:!0,width:5,height:3.79,length:5,position_x:-10,position_y:-1,position_z:-10,mass:90},{shape:"box",color:11194623,fixedRotation:!0,width:5,height:.17,length:5,position_x:10,position_y:0,position_z:-10,mass:30},{shape:"box",position_x:-.4,position_y:-1.76,position_z:-10.07,height:.2,length:1,width:24.9,color:9805311,mass:30},{shape:"triangularPrism",position_x:0,position_y:-2.6,position_z:-10,rotation_y:90,height:1,width:1,length:1},{shape:"box",lowFriction:!0,position_x:-7.45,position_y:0,position_z:-10,height:1,length:5,width:.1},{shape:"box",lowFriction:!0,position_x:7.45,position_y:0,position_z:-10,height:1,length:5,width:.1},{shape:"box",lowFriction:!0,position_x:12.55,position_y:-2,position_z:-10,height:5,length:5,width:.1},{shape:"box",lowFriction:!0,position_x:-12.55,position_y:-2,position_z:-10,height:5,length:5,width:.1},{shape:"box",lowFriction:!0,position_x:10,position_y:-2,position_z:-7.45,height:5,length:.1,width:5.2},{shape:"box",lowFriction:!0,position_x:10,position_y:-2,position_z:-12.55,height:5,length:.1,width:5.2},{shape:"box",lowFriction:!0,position_x:-10,position_y:-2,position_z:-12.55,height:5,length:.1,width:5.2},{shape:"box",lowFriction:!0,position_x:-10,position_y:-2,position_z:-7.45,height:5,length:.1,width:5.2},{shape:"box",height:.2,position_x:0,position_y:.4,position_z:-10,width:14.8,length:5.2},{shape:"box",lowFriction:!0,position_x:-7.45,position_y:-2.5,position_z:-8.5,height:4,length:2,width:.1},{shape:"box",lowFriction:!0,position_x:-7.45,position_y:-2.5,position_z:-11.5,height:4,length:2,width:.1},{shape:"box",lowFriction:!0,position_x:7.45,position_y:-2.5,position_z:-11.5,height:4,length:2,width:.1},{shape:"box",lowFriction:!0,position_x:7.45,position_y:-2.5,position_z:-8.5,height:4,length:2,width:.1},{shape:"box",height:.2,position_x:0,position_y:.4,position_z:-4,width:25.2,length:6.8},{shape:"box",position_x:-15.08,position_y:4.04,position_z:-10,length:5,width:5,height:.2},{shape:"triangularPrism",height:.1,length:.2,width:5.5,position_x:10.25,position_y:.55,position_z:-7.5},{shape:"triangularPrism",height:.1,length:.2,width:5.5,position_x:7.5,position_y:.55,position_z:-10.25,rotation_y:90},{shape:"triangularPrism",height:.24,length:1,width:12,position_x:13,position_y:.62,position_z:-7,rotation_y:90},{shape:"triangularPrism",height:.24,length:1,width:27,position_x:0,position_y:.62,position_z:-13.01},{shape:"triangularPrism",height:.24,length:1,width:12,position_x:-13.01,position_y:.62,position_z:-7,rotation_y:90},{shape:"box",lowFriction:!0,position_x:-12.55,position_y:4.04,position_z:-10,height:.2,length:5,width:.1},{shape:"triangularPrism",height:.24,length:1,width:27,position_x:0,position_y:.62,position_z:-1},{shape:"box",width:27,position_x:0,position_y:-1,position_z:-1,length:1,height:3},{shape:"box",height:.2,position_x:-16,position_y:.4,position_z:-7,width:5,length:13},{shape:"sphere",color:7841791,position_x:6.25,position_y:1.5,position_z:-10,mass:60},{shape:"sphere",color:7841791,position_x:-5.36,position_y:1.5,position_z:-10,mass:60},{shape:"box",type:"trigger",event:"setCameraMode",dataSet:"cinematic,0, 13, 17",width:1,length:10,height:1,position_x:0,position_y:2,position_z:-7},{shape:"box",type:"trigger",dataSet:"-22, 10, 5",width:1,length:10,height:1,position_x:-5,position_y:2,position_z:-7},{shape:"box",type:"trigger",dataSet:"8, 14, 6",width:1,length:10,height:1,position_x:5,position_y:2,position_z:-7},{shape:"box",height:1,width:80,length:60,position_x:0,position_y:-4,position_z:-4,type:"trigger",event:"reset"}]},Lt={i01:wn,i02:bn,i03:vn,o01:zn,o02:Cn,o03:Sn,o04:Mn,o05:Pn,o06:En,o07:Ln,o08:kn,o09:Tn,o10:Fn,empty:fn,test:{meta:{},elements:[{type:"vehicle",position_y:2,position_z:15},{shape:"box",width:24,height:.2,length:40,position_x:14,position_z:22},{shape:"triangularPrism",width:2,length:2,offset:-2,position_y:1},{shape:"box",width:24,height:.2,length:120,position_x:-10,position_z:-18},{shape:"box",size:2,position_x:15,position_y:2,position_z:10,mass:40,fixedRotation:!0,rotation_x:45,rotation_y:45},{shape:"box",size:2,position_x:20,position_y:5,position_z:10,rotation_x:45,rotation_y:45},{type:"compound",shape:"loop",segmentPositionOffset:.6,position_x:5,position_y:8.2,position_z:4,rotation_x:12},{type:"compound",shape:"slopeTransition",segmentWidth:6,segmentHeight:.6,segmentLength:12,segmentCount:10,position_x:-25.8,position_z:30},{type:"trigger",shape:"sphere",event:"setCameraPosition",dataSet:"-6,10,26",radius:3,position_x:10,position_y:1,position_z:15},{type:"trigger",shape:"sphere",event:"finish",radius:1,position_x:12,position_y:3,position_z:5},{type:"trigger",shape:"sphere",event:"setCameraMode",dataSet:"hood",radius:3,position_x:6,position_y:1.9,position_z:-.4},{shape:"box",position_y:12,width:4*2,height:.1*2,length:2*2,position_x:-20,position_z:8},{shape:"box",position_y:11.8,width:9*2,height:.1*2,length:.2*2,position_x:-7,position_z:6.2,lowFriction:!0},{shape:"box",position_y:11.8,width:9*2,height:.1*2,length:.2*2,position_x:-7,position_z:9.8,lowFriction:!0},{shape:"box",position_y:12,width:9*2,height:.1*2,length:.1*2,position_x:-7,position_z:9.9,lowFriction:!0},{shape:"box",position_y:12,width:9*2,height:.1*2,length:.1*2,position_x:-7,position_z:6.1,lowFriction:!0},{shape:"box",position_y:12,width:2*2,height:.1*2,length:1.8*2,position_x:-14,position_z:8,mass:10},{shape:"box",position_x:9.11,position_y:7.09,position_z:-15,rotation_z:45,height:.1*2,length:10*2,width:10*2},{shape:"box",position_x:10.21,position_y:5.74,position_z:-35,rotation_z:35,height:.1*2,length:10*2,width:10*2},{type:"compound",shape:"cantedCurve",position_x:8.94,position_y:-3.61,position_z:53.91,radius:11.65,rotation_x:0,rotation_y:-83.16,rotation_z:0,angle:60,segmentWidth:6,segmentCount:32,segmentLength:2},{type:"compound",shape:"cantedCurve",position_x:8.94,position_y:-7.71,position_z:53.91,radius:7.675,rotation_x:0,rotation_y:4.18,rotation_z:0,angle:30,segmentWidth:6,segmentCount:32,segmentLength:1},{shape:"box",position_x:9,position_y:-9.2,position_z:53.81,rotation_x:0,rotation_y:0,rotation_z:0,width:10,length:10,height:.1}]}},An="Finished!",In="Retry",Rn="Next",Bn="Select map";function On(){const{goals:e,time:t}=m.useContext(Dt);return e.time?g.jsxs(g.Fragment,{children:[g.jsx("h4",{children:"Goals"}),!!e.time&&g.jsxs("p",{children:["Finis under: ",g.jsx("span",{className:"textHighlight_2",children:ie(e.time)}),g.jsx("span",{className:"end_adornment",children:t<=e.time?"✅":"🟧"})]})]}):null}function Dn({closeModal:e}){const t=m.useContext(Dt),i=m.useRef();return m.useEffect(()=>{i.current&&i.current.focus()},[i.current]),g.jsxs($e,{children:[g.jsx("span",{className:"modal__header",children:An}),g.jsxs("span",{className:"modal__body",children:[g.jsxs("p",{children:["Your time: ",g.jsx("span",{className:"textHighlight_1",children:ie(t.time)}),g.jsx("span",{className:"end_adornment",children:"⏱"})]}),!!t.respawnCount&&g.jsxs("p",{children:["Respawn count: ",g.jsx("span",{className:"textHighlight_1",children:t.respawnCount})]}),g.jsx(On,{})]}),g.jsxs("div",{className:"modal__footer",children:[g.jsx("button",{onClick:n,children:In}),g.jsx("button",{onClick:s,children:Bn}),g.jsx("button",{onClick:o,ref:i,children:Rn})]})]});function o(){e(),t.loadNextMap()}function n(){e(),t.reset()}function s(){e(),t.listeners.dispatch(X.openMapSelectorPanel)}}const Ot=document.createElement("aside");Ot.id="gameProgressModalControllerRoot";Ot.classList.add("hidden");document.body.appendChild(Ot);const Dt=m.createContext(void 0);function jn(e){ft.render(g.jsx(Dt.Provider,{value:e,children:g.jsx(Wn,{})}),Ot)}function Wn(){const e=m.useContext(Dt),[t,i]=m.useState(!0);return m.useEffect(()=>(e.listeners.add(X.openModal,o),()=>{e.listeners.remove(X.openModal,o)}),[]),t?null:g.jsx(Dn,{closeModal:n});function o(){i(!1)}function n(){i(!0)}}var X=(e=>(e.start="start",e.reset="reset",e.openModal="openModal",e.openMapSelectorPanel="openMapSelectorPanel",e))(X||{});let _t;const Hn=5e3,Xt=document.createElement("aside"),Mt=document.createElement("span"),Se="00:00.000";Xt.id="hud";const[Nn]=Object.entries(Lt)[0];class $n{constructor(t,i){r(this,"timer",new xn);r(this,"listeners",new pt);r(this,"started",!1);r(this,"checkpointsReached",0);r(this,"respawnCount",0);r(this,"time");r(this,"goals");r(this,"_mapBuilder");r(this,"checkpointHandler");r(this,"vehicle");r(this,"currentMapId",Nn);r(this,"checkpointReached",t=>{_t=t,this.checkpointsReached++});Mt.textContent=Se,Xt.appendChild(Mt),document.getElementById("topLeftPanel").appendChild(Xt),this._mapBuilder=t,this.vehicle=i,jn(this)}initCheckpointHandler(t,i){this.checkpointHandler=new mn(t,i)}respawnAtLastCheckpoint(){_t?(this.vehicle.chassisBody.velocity.setZero(),this.vehicle.chassisBody.angularVelocity.setZero(),this.vehicle.chassisBody.position.copy(_t.position),this.vehicle.chassisBody.quaternion.copy(_t.quaternion),this.respawnCount++,this.timer.add(Hn),this.listeners.dispatch("reset")):this.reset()}start(){this.started=!0,this.timer.start(),this.listeners.dispatch("start")}stop(){this.timer.stop(),this.time=this.timer.time}reset(){this.started=!1,this.checkpointsReached=0,this.respawnCount=0,this.time=void 0,Mt.textContent=Se,this.timer.reset(),this._mapBuilder.resetDynamicMapElements(),this.checkpointHandler.init(this._mapBuilder,this),_t=void 0,this.listeners.dispatch("reset")}loadMap(t=this.currentMapId){if(!Lt.hasOwnProperty(t)){console.warn(`invalid map name ${t}`);return}const{meta:i,elements:o}=Lt[t],n=this._mapBuilder.selectedMapElementId;this.goals=i.goals||{},this._mapBuilder.importMap(o),t===this.currentMapId&&this._mapBuilder.editMode&&n&&this._mapBuilder.selectMapElement(n),this.currentMapId=t,this.reset()}loadNextMap(){const{meta:t}=Lt[this.currentMapId];t.next?this.loadMap(t.next):this.reset()}updateHUD(){!this.timer.started||this.timer.stopped||(Mt.textContent=ie(this.timer.time))}openModal(){this.listeners.dispatch("openModal")}}class Vn{constructor(t,i,o,n){r(this,"_enabled",!1);r(this,"scene");r(this,"camera");r(this,"domElement");r(this,"mapBuilder");r(this,"raycaster",new ki);r(this,"mousePosition",new Oe);r(this,"raycastResult",[]);r(this,"hoveredObject");r(this,"onSelect");r(this,"onClick",t=>{if(t.type==="click"&&!t.altKey)return;this.mousePosition.x=t.clientX/window.innerWidth*2-1,this.mousePosition.y=-(t.clientY/window.innerHeight)*2+1,this.raycaster.setFromCamera(this.mousePosition,this.camera),this.raycastResult.length=0,this.raycaster.intersectObjects(this.scene.children,!0,this.raycastResult);const{mapElementIdList:i}=this.mapBuilder;let o;for(let n=0;n<this.raycastResult.length;n++){const s=this.raycastResult[n].object;if(i.includes(s.name)){o=s;break}else if(i.includes(s.parent.name)){o=s.parent;break}}o&&this.mapBuilder.selectMapElement(o.name)});this.camera=i,this.scene=t,this.domElement=o,this.mapBuilder=n}get enabled(){return this._enabled}set enabled(t){this._enabled!==t&&(t?(this.domElement.addEventListener("click",this.onClick),this.domElement.addEventListener("dblclick",this.onClick)):(this.domElement.removeEventListener("click",this.onClick),this.domElement.removeEventListener("dblclick",this.onClick),this.hoveredObject=void 0),this._enabled=t)}}const{radToDeg:Vt}=Ft;function Kn(e,t){const i=new Ti(e.camera,e.domElement);let o=!1,n=!1;function s(){const a=i.object,h=a.name;t.translate(h,{position_x:it(a.position.x),position_y:it(a.position.y),position_z:it(a.position.z),rotation_x:it(Vt(a.rotation.x)),rotation_y:it(Vt(a.rotation.y)),rotation_z:it(Vt(a.rotation.z))})}return i.addEventListener("objectChange",Qi(s,100)),i.addEventListener("dragging-changed",a=>{o?e.orbitControls.enabled=n:(n=e.orbitControls.enabled,e.orbitControls.enabled=!1),o=!!a.value}),j.addKeyPressListener("KeyG",()=>{i.mode==="translate"?i.setMode("rotate"):i.setMode("translate")}),j.addKeyDownChangeListener(a=>{a.has("ShiftLeft")?i.setTranslationSnap(1):i.setTranslationSnap(null)}),i}const jt=document.createElement("aside");jt.id="menuModalControllerRoot";jt.classList.add("hidden");document.body.appendChild(jt);const Un={gameProgressManager:void 0,renderer:void 0,menuOpen:!1,openMenu:V,closeMenu:V,selectedTabIndex:0,setSelectedTabIndex:V},ii=m.createContext(Un);function qn(e,t){ft.render(g.jsx(Gn,{gameProgressManager:e,renderer:t}),jt)}function Gn({gameProgressManager:e,renderer:t}){const[i,o]=m.useState(!1),[n,s]=m.useState(0),a=m.useCallback(()=>{o(!0)},[]),h=m.useCallback(()=>{o(!1)},[]),l={gameProgressManager:e,renderer:t,menuOpen:i,openMenu:a,closeMenu:h,selectedTabIndex:n,setSelectedTabIndex:s};return g.jsx(ii.Provider,{value:l,children:g.jsx(Zn,{})})}function Zn(){const{menuOpen:e,openMenu:t,setSelectedTabIndex:i,gameProgressManager:o}=m.useContext(ii),n=m.useCallback(()=>{t()},[]),s=m.useCallback(()=>{i(0),t()},[]);m.useEffect(()=>(j.addKeyPressListener("Tab",n),o.listeners.add(X.openMapSelectorPanel,s),()=>{j.removeKeyPressListener("Tab",n),o.listeners.remove(X.openMapSelectorPanel,s)}),[]);const a=m.lazy(()=>qe(()=>import("./modules/MenuModal-26379301.js"),["./modules\\MenuModal-26379301.js","./vendor\\react-01fd2a3a.js","./vendor\\vendor-8996eea6.js","./modules\\Switch-9a6a2f6d.js","./vendor\\cannon-b9fe1075.js","./vendor\\three-5c8f7b36.js"],import.meta.url));return m.useMemo(()=>e?g.jsx(m.Suspense,{fallback:g.jsx(Ge,{}),children:g.jsx(a,{})}):null,[e])}function Yn(e,t){const i={baseMaterial:new Be({color:7829367}),fenderMaterial:new Pt({color:328965}),grillMaterial:new Pt({color:2236962}),chromeMaterial:new yt({color:13421772}),glassMaterial:new yt({color:11324631}),tailLightMaterial:new yt({color:5570560}),headLightMaterial:new yt({color:16777147}),wheelMaterial:new Pt};return e.traverse(n=>{n.material&&(i.wheelMaterial.map=n.material.map,n.material=i.wheelMaterial,n.material.needsUpdate=!0),f.renderShadows&&(n.castShadow=!0)}),t.traverse(n=>{n.material&&(n.material=o(n.name)),f.renderShadows&&(n.castShadow=!0,n.receiveShadow=!0)}),i;function o(n){switch(n){case"front_bumper":case"rear_bumper":case"front_fender":case"rear_fender":return i.fenderMaterial;case"grill":return i.grillMaterial;case"brushGuard":return i.chromeMaterial;case"glass":return i.glassMaterial;case"tail_lights":return i.tailLightMaterial;case"head_lights":return i.headLightMaterial;default:return i.baseMaterial}}}const Me={engineForceMin:-f.vehicle.maxEngineForce,engineForceMax:f.vehicle.maxEngineForce,brakeForceMin:0,brakeForceMax:f.vehicle.maxBrakeForce,steeringAngleMin:-f.vehicle.maxSteeringAngle,steeringAngleMax:f.vehicle.maxSteeringAngle},Xn={engineForce:0,brakeForce:0,steeringAngle:0};function Jn(e){return new Proxy(Xn,{set(t,i,o){const n=t[i],s=oo(o,Me[`${i}Min`],Me[`${i}Max`]);return n!==s&&(t[i]=s),!0}})}const Qn=new b(0,0,1);let mt,ut;const{renderWireFrame:Kt}=f,{torqueSplitRatio:ts,maxEngineForce:es,maxBrakeForce:is,maxSteeringAngle:os,steeringSpeed:Pe,wheelRadius:ns,wheelSuspensionRestLength:ss,wheelSuspensionStiffness:as,wheelMaxSuspensionTravel:rs,wheelMaxSuspensionForce:hs,wheelDampingCompression:ps,wheelDampingRelaxation:ls,wheelFrictionSlip:cs,wheelForwardAcceleration:ds,wheelSidedAcceleration:gs,wheelRollInfluence:_s}=f.vehicle,ms=.1,K=0,U=1,st=2,at=3,us=new Set([st,at]),[Ee,Le]=ts,Jt=[Ee/2,Ee/2,Le/2,Le/2],L=[...Jt];class ys{constructor(t,i){r(this,"base");r(this,"chassisBody");r(this,"chassisMesh");r(this,"wheelBodies");r(this,"wheelMeshes");r(this,"state");r(this,"initialPosition",new w);r(this,"initialRotation",new le);r(this,"currentSteeringAngle",0);r(this,"trackWidth",0);r(this,"wheelBase",0);r(this,"materials");r(this,"update",()=>{this.steerWheels(),this.applyWheelSlipReduction();for(let t=0;t<this.base.wheelInfos.length;t++)this.base.applyEngineForce(this.state.engineForce*L[t]*.01,t),this.base.updateWheelTransform(t),mt=this.base.wheelInfos[t].worldTransform,this.wheelMeshes[t].position.copy(mt.position),this.wheelMeshes[t].quaternion.copy(mt.quaternion),Kt&&(ut=this.wheelBodies[t],ut.position.copy(mt.position),ut.quaternion.copy(mt.quaternion),this.wheelMeshes[t].position.copy(ut.position),this.wheelMeshes[t].quaternion.copy(ut.quaternion));this.chassisMesh.position.copy(this.chassisBody.position),this.chassisMesh.quaternion.copy(this.chassisBody.quaternion),this.chassisMesh.translateOnAxis(Qn,.6)});r(this,"applyWheelSlipReduction",()=>{const t=this.wheelHasGrip(U),i=this.wheelHasGrip(K),o=this.wheelHasGrip(at),n=this.wheelHasGrip(st);if(t&&!o&&L[at]>1)L[U]+=1,L[at]-=1;else if(!t&&o&&L[U]>1)L[U]-=1,L[at]+=1;else{const s=Math.sign(L[U]-Jt[U]);s&&(L[U]-=s*1,L[at]+=s*1)}if(i&&!n&&L[st]>1)L[K]+=1,L[st]-=1;else if(!i&&n&&L[K]>1)L[K]-=1,L[st]+=1;else{const s=Math.sign(L[K]-Jt[K]);s&&(L[K]-=s*1,L[st]+=s*1)}});r(this,"brakeWheel",t=>{this.base.setBrake(this.state.brakeForce,t)});r(this,"steerWheels",()=>{const{currentSteeringAngle:t}=this,{steeringAngle:i}=this.state;let o=0;if(t<i)o=Math.min(i,t+Pe);else if(t>i)o=Math.max(i,t-Pe);else return;const{wheelBase:n,trackWidth:s}=this,a=n*2,h=Math.sin(o),l=Math.cos(o),d=Math.atan(a*h/(a*l-s*h)),c=Math.atan(a*h/(a*l+s*h));this.base.setSteeringValue(d,U),this.base.setSteeringValue(c,K),this.currentSteeringAngle=o});r(this,"wheelHasGrip",t=>this.base.wheelInfos[t].isInContact&&!this.base.wheelInfos[t].sliding);const o=new qt(new w(.9,.4,2.1)),n=new qt(new w(.9,.4,1.2));this.chassisBody=new G({mass:f.vehicle.mass}),this.chassisBody.addShape(o,new w(0,0,.1)).addShape(n,new w(0,.8,.8)),this.base=new _i({chassisBody:this.chassisBody,indexForwardAxis:2,indexRightAxis:0,indexUpAxis:1});const s={radius:ns,suspensionRestLength:ss,suspensionStiffness:as,maxSuspensionTravel:rs,maxSuspensionForce:hs,dampingCompression:ps,dampingRelaxation:ls,frictionSlip:cs,forwardAcceleration:ds,sideAcceleration:gs,rollInfluence:_s,axleLocal:new w(-1,0,0),directionLocal:new w(0,-1,0),chassisConnectionPointLocal:new w,customSlidingRotationalSpeed:-30,useCustomSlidingRotationalSpeed:!0},a=.3,h=.85;if(this.trackWidth=h*2,this.wheelBase=1.2+1.4,s.chassisConnectionPointLocal.set(h,-a,-1.2),this.base.addWheel(s),s.chassisConnectionPointLocal.set(-h,-a,-1.2),this.base.addWheel(s),s.chassisConnectionPointLocal.set(h,-a,1.4),this.base.addWheel(s),s.chassisConnectionPointLocal.set(-h,-a,1.4),this.base.addWheel(s),Kt){const c=new le;c.setFromAxisAngle(w.UNIT_Z,Math.PI/2),this.wheelBodies=this.base.wheelInfos.map(p=>{const _=new ke(p.radius,p.radius,p.radius/2,8),x=new G({type:G.KINEMATIC,collisionFilterGroup:0});return x.addShape(_,w.ZERO,c),x})}this.materials=Yn(i,t);const l={front_r:i,front_l:i.clone(),rear_r:i.clone(),rear_l:i.clone()},d=["x","y","z"];Object.keys(l).forEach(c=>{c.endsWith("_r")&&d.forEach(p=>{l[c].scale[p]*=-1})}),this.wheelMeshes=[l.front_l,l.front_r,l.rear_l,l.rear_r],this.chassisMesh=t,this.state=Jn()}addToWorld(t){return this.base.addToWorld(t),Kt&&this.wheelBodies.forEach(t.addBody,t),t.addEventListener("postStep",this.update),this}addToScene(t){return this.wheelMeshes.forEach(i=>{t.add(i)}),t.add(this.chassisMesh),this}setEngineForceDirection(t){this.state.engineForce=es*t,t===-1?(this.state.engineForce*=.9,this.materials.tailLightMaterial.emissive.setHSL(0,0,ms)):this.materials.tailLightMaterial.emissive.setHSL(0,0,0)}setBrakeForce(t){this.state.brakeForce=is*t,us.forEach(this.brakeWheel)}setSteeringDirection(t){this.state.steeringAngle=os*t}resetPosition(){this.chassisBody.position.copy(this.initialPosition),this.chassisBody.quaternion.copy(this.initialRotation),this.chassisBody.velocity.setZero(),this.chassisBody.angularVelocity.setZero()}}const xs=`
    varying vec2 vUv;

    void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
`,fs=`
    uniform float opacity;
    uniform vec3 color;
    uniform sampler2D tDiffuse;

    varying vec2 vUv;

    void main() {
        vec4 texel = texture2D(tDiffuse, vUv);

        vec3 luma = vec3(0.2, 0.4, 0.0);
        float v = dot(texel.xyz, luma);

        vec3 finalColor = vec3(
            (opacity * v * color.x) + ((1.0 - opacity) * texel.x),
            (opacity * v * color.y) + ((1.0 - opacity) * texel.y),
            (opacity * v * color.z) + ((1.0 - opacity) * texel.z)
        );

        gl_FragColor = vec4(finalColor, texel.w);
    }
`,ws={uniforms:{tDiffuse:{type:"t",value:null},color:{type:"c",value:new Fi(16777215)},opacity:{type:"f",value:1}},vertexShader:xs,fragmentShader:fs},{degToRad:Ut}=Ft,bs=1/f.physicsFrameRate,Qt=new Fe("general"),vs=new Fe("lowFriction"),zs=new ee(Qt,Qt,{friction:.001}),Cs=new ee(Qt,vs,{friction:0,contactEquationStiffness:1e8});f.fullscreen&&Po("Allow fullscreen?").then(e=>{e?document.documentElement.requestFullscreen():f.fullscreen=!1});const te=new xi,Tt=document.getElementById("telemetryPanel");Tt.appendChild(te.dom);f.showTelemetry||Tt.classList.add("hidden");kt.add("showTelemetry",e=>{e?Tt.classList.remove("hidden"):Tt.classList.add("hidden")});(async function(){let t=!1,i;const o=new Gi,n=new Ai,s=new Ii(9151409,12298359,4);n.add(s);const a=new mi,{x:h,y:l,z:d}=f.world.gravity;a.gravity.set(h,l,d),a.broadphase=new ui(a),a.defaultContactMaterial.friction=.001,a.addContactMaterial(zs),a.addContactMaterial(Cs);const c=yi(n,a,{onInit(u,E){kt.add("renderWireFrame",k=>{E.visible=k})}}),p=new Ri({antialias:f.antialias,powerPreference:f.powerPreference});p.setPixelRatio(window.devicePixelRatio),p.setSize(window.innerWidth,window.innerHeight),p.shadowMap.enabled=f.renderShadows;const _=new Fo(p.domElement);if(p.domElement.tabIndex=-1,p.domElement.focus(),f.renderShadows)i=new Bi({parent:n,camera:_.camera,cascades:3,maxFar:500,mode:"logarithmic",shadowMapSize:4096*2,lightIntensity:1});else{const u=new Oi(16121343,3);u.position.set(-30,50,-30).normalize(),n.add(u)}let x;const C=new Di(p),z=new ji(n,_.camera),O=new Oe(window.innerWidth,window.innerHeight),S=new Wi(O,n,_.camera);S.edgeStrength=2,S.visibleEdgeColor.setHex(15102720),S.hiddenEdgeColor.setHex(6697728),S.enabled=!1;const A=new Hi(ws);A.enabled=!1;const wt=new Ni;C.addPass(z),C.addPass(S),C.addPass(A),C.addPass(wt),document.body.appendChild(p.domElement),window.onresize=We(ai,500);const[tt,he,W]=await ri(),M=new ys(tt,he);M.addToWorld(a).addToScene(n),_.setCameraTarget(M),_.cameraMode=Ue.cinematic,_.camera.aspect=window.aspectRatio,_.camera.updateProjectionMatrix();const ct=new $i;_.camera.add(ct);const J=new Vi(ct);new Ki().load("music/A Himitsu - Cease.ogg",u=>{J.setBuffer(u),J.setLoop(!0)});const v=new pn(n,a),P=new $n(v,M);P.initCheckpointHandler(n,{checkpoint:un(),finish:W}),P.listeners.add(X.start,()=>{J.isPlaying||J.play()}),P.listeners.add(X.reset,()=>{A.enabled&&(A.enabled=!1),x&&window.clearTimeout(x)}),kt.add("audioVolume",u=>{J.setVolume(u)});const bt=new Vn(n,_.camera,p.domElement,v),I=Kn(_,v);n.add(I.getHelper()),qn(P,p),v.onPlaceVehicle=(u=0,E=0,k=0,H=0,D=0,et=0)=>{M.initialPosition.set(u,E,k),M.initialRotation.setFromEuler(Ut(H),Ut(D),Ut(et)),M.resetPosition()},v.eventTriggerListeners.add(Q.setCameraPosition,({relatedTarget:u,dataSet:E})=>{if(u===M.chassisBody){const[k,H,D]=E.split(",");_.cameraPosition.set(Number(k),Number(H),Number(D))}}),v.eventTriggerListeners.add(Q.setCameraMode,({relatedTarget:u,dataSet:E})=>{if(u===M.chassisBody){const[k,H,D,et]=E.split(",");_.cameraMode=k,(H||D||et)&&_.cameraPosition.set(Number(H),Number(D),Number(et))}}),v.eventTriggerListeners.add(Q.startAnimation,({relatedTarget:u,dataSet:E})=>{if(u===M.chassisBody){const k=E,H=v.getBodyFromStore(k),{velocity_x:D,velocity_y:et,velocity_z:hi}=v.getAnimationPropsFromStore(k);H.velocity.set(D,et,hi)}}),v.eventTriggerListeners.add(Q.reset,({relatedTarget:u})=>{u===M.chassisBody&&(A.enabled=!0,A.uniforms.opacity.value=.01,x=window.setTimeout(si,f.autoResetDelay))}),v.listeners.add(q.mapElementSelect,u=>{if(S.selectedObjects.length=0,I.detach(),u===nt)S.selectedObjects.push(M.chassisMesh,...M.wheelMeshes);else if(u){const E=v.getMeshFromStore(u);S.selectedObjects.push(E),I.attach(E)}}),j.addKeyPressListener("KeyP",()=>{ni()}),j.addKeyPressListener("KeyO",()=>{console.log(_.camera.position.x,",",_.camera.position.y,",",_.camera.position.z)}),j.addKeyPressListener("KeyR",u=>{u.altKey?P.loadMap():P.respawnAtLastCheckpoint()}),j.addKeyPressListener("KeyC",()=>{_.switchMode()}),j.addKeyPressListener("KeyM",()=>{oi()}),j.addKeyPressListener("Delete",()=>{v.editMode&&v.selectedMapElementId&&v.destroy(v.selectedMapElementId)}),j.addKeyDownChangeListener(u=>{let E=0,k=0;u.has("KeyW")||u.has("ArrowUp")?E=1:(u.has("KeyS")||u.has("ArrowDown"))&&(E=-1),u.has("KeyA")||u.has("ArrowLeft")?k=1:(u.has("KeyD")||u.has("ArrowRight"))&&(k=-1),!P.started&&E&&P.start(),M.setEngineForceDirection(E),M.setSteeringDirection(k),M.setBrakeForce(Number(u.has("Space")))}),P.loadMap();function oi(){v.toggleEditMode(),v.editMode?(S.enabled=!0,I.enabled=!0,bt.enabled=!0,v.selectedMapElementId&&I.attach(v.getMeshFromStore(v.selectedMapElementId))):(S.enabled=!1,I.detach(),I.enabled=!1,bt.enabled=!1)}function ni(){t=!t,t?(o.stop(),p.setAnimationLoop(null),xt("paused"),P.started&&P.stop()):(o.start(),p.setAnimationLoop(pe),P.started&&P.start())}p.setAnimationLoop(pe);function pe(){f.showTelemetry&&te.begin();const u=o.getDelta();_.update(u),P.updateHUD(),P.checkpointHandler.updateVisuals(u),i&&i.update(),C.render(),a.step(bs,u),f.renderWireFrame&&c.update(),A.enabled&&A.uniforms.opacity.value<1&&(A.uniforms.opacity.value+=.01),f.showTelemetry&&te.end()}function si(){P.respawnAtLastCheckpoint()}function ai(){_.camera.aspect=window.aspectRatio,_.camera.updateProjectionMatrix(),p.setSize(window.innerWidth,window.innerHeight),C.setSize(window.innerWidth,window.innerHeight),S.setSize(window.innerWidth,window.innerHeight)}async function ri(){const[u,E,k,H]=await Promise.all([vt("img/skybox.jpg","398 kB"),vt("3D_objects/lowPoly_car_wheel.gltf","205 kB"),vt("3D_objects/mg.glb","98 kB"),vt("img/pin.svg","0.9 kB")]),D=new Ui(Ji(u));return D.needsUpdate=!0,D.colorSpace=qi,n.background=D,[k.scene,E.scene,Xi(H,{x:-6,y:-3,scale:.07})]}})();Object.defineProperty(window,"aspectRatio",{get(){return window.innerWidth/window.innerHeight}});export{Gt as C,Ze as E,Yi as I,ii as M,Q as T,$e as a,F as b,f as c,hn as d,io as e,en as f,ln as g,ks as h,tn as i,nt as j,Qo as l,Lt as m,V as n,it as r,$t as s,Qi as t,ge as u,oo as v};
