var T=Object.defineProperty;var b=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var F=(t,l,n)=>l in t?T(t,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[l]=n,f=(t,l)=>{for(var n in l||(l={}))C.call(l,n)&&F(t,n,l[n]);if(b)for(var n of b(l))k.call(l,n)&&F(t,n,l[n]);return t};var x=(t,l)=>{var n={};for(var a in t)C.call(t,a)&&l.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&b)for(var a of b(t))l.indexOf(a)<0&&k.call(t,a)&&(n[a]=t[a]);return n};import{R as e,r as p}from"./react6742c151.js";import{I as L,n as g,M as h,m as I,c as E,a as v}from"./index729ca5c2.js";import{L as y,S as B}from"./Switche9f51982.js";import"./cannoncd468cdc.js";import"./three895a3223.js";function M({id:t,label:l,value:n="",defaultValue:a="",checked:s=!1,onChange:r}){const c=r?{checked:s,onChange:u}:{defaultChecked:s};return e.createElement(L,{label:l,id:t},e.createElement("input",f({type:"checkbox",id:t,name:t,value:n},c)));function u({currentTarget:o}){r(o.checked?n:a,t)}}function w(r){var c=r,{id:t,label:l,defaultValue:n,onChange:a=g}=c,s=x(c,["id","label","defaultValue","onChange"]);const[u,o]=p.exports.useState(n);return e.createElement(L,{label:l,id:t},e.createElement("input",f({type:"range",id:t,name:t,defaultValue:n,onChange:d},s)),e.createElement("input",{value:u,onChange:g,tabIndex:-1}));function d(m){const i=Number(m.currentTarget.value);o(i),a(i,t)}}const S=function({children:t}){return e.createElement("div",{className:"tabbedBox__tabPanel"},t)};function P({index:t,label:l,classNames:n,onClick:a}){return e.createElement("span",{className:`tabbedBox__tab ${n}`,"data-index":t,onClick:a},l)}function j(s){var r=s,{children:t,defaultTabIndex:l=0,onSelect:n=g}=r,a=x(r,["children","defaultTabIndex","onSelect"]);const[c,u]=p.exports.useState(l);return e.createElement("div",f({className:"tabbedBox"},a),e.createElement("div",{className:"tabbedBox__tabBar"},t.map((d,m)=>{const{tabLabel:i}=d.props,R=c===m?"selected":"";return e.createElement(P,{index:m,label:i,key:i,onClick:o,classNames:R})})),t[c]);function o({currentTarget:d}){const i=Number(d.dataset.index);u(i),n(i)}}function N({tabLabel:t}){return e.createElement(S,{tabLabel:t},e.createElement("p",null,"Open menu: ",e.createElement("span",null,"Tab")),e.createElement("hr",null),e.createElement("p",null,"Respawn at last checkpoint: ",e.createElement("span",null,"R")),e.createElement("p",null,"Reload map: ",e.createElement("span",null,"Alt + R")),e.createElement("p",null,"Accelerate: ",e.createElement("span",null,"\u2191")," / ",e.createElement("span",null,"W")),e.createElement("p",null,"Reverse: ",e.createElement("span",null,"\u2193")," / ",e.createElement("span",null,"S")),e.createElement("p",null,"Steer left: ",e.createElement("span",null,"\u2190")," / ",e.createElement("span",null,"A")),e.createElement("p",null,"Steer right: ",e.createElement("span",null,"\u2192")," / ",e.createElement("span",null,"D")),e.createElement("p",null,"Hand brake: ",e.createElement("span",null,"Space")),e.createElement("p",null,"Switch camera: ",e.createElement("span",null,"C")),e.createElement("p",null,"Pause: ",e.createElement("span",null,"P")),e.createElement("hr",null),e.createElement("p",null,"Open/close editor panel: ",e.createElement("span",null,"M")),e.createElement("p",null,"(editor) Mouse select: ",e.createElement("span",null,"Alt + click")," / ",e.createElement("span",null,"double click")),e.createElement("p",null,"(editor) Toggle mouse action move/rotate: ",e.createElement("span",null,"G")),e.createElement("p",null,"(editor) Snap on mouse move: ",e.createElement("span",null,"Shift")),e.createElement("p",null,"(editor) Remove selected object: ",e.createElement("span",null,"Delete")))}const W="mapList",A="load",_=Object.keys(I);function D({tabLabel:t}){const{gameProgressManager:l,closeMenu:n}=p.exports.useContext(h),[a,s]=p.exports.useState();return e.createElement(S,{tabLabel:t},e.createElement(y,{label:W,contentList:_,selected:a,onClick:s,onDoubleClick:r}),e.createElement("button",{onClick:()=>{r()}},A));function r(c=a){c&&(l.loadMap(c),n())}}const V="Fullscreen:",O="Resolution scale:",H="Antialias:",q="Render wireFrame:",z="Apply settings";function G({tabLabel:t}){const{renderer:l}=p.exports.useContext(h),[n,a]=p.exports.useState(Boolean(document.fullscreenElement));return p.exports.useEffect(()=>{document.fullscreenElement&&!n?document.exitFullscreen():n&&document.documentElement.requestFullscreen()},[n]),e.createElement(S,{tabLabel:t},e.createElement(B,{id:"fullscreen",label:V,on:n,onChange:s}),e.createElement(w,{id:"resolutionScale",label:O,min:.1,max:1,step:.1,defaultValue:E.resolutionScale,onChange:r}),e.createElement("hr",null),e.createElement($,null));function s(){a(!n),E.fullscreen=!n}function r(c){l.setPixelRatio(c),E.resolutionScale=c}}function $(){const t={antialias:E.antialias,renderWireFrame:E.renderWireFrame},l=p.exports.useRef(new Set),[n,a]=p.exports.useState(!1);return e.createElement("form",{id:"settingsForm",onChange:s},e.createElement(M,{id:"antialias",label:H,value:"antialias",checked:t.antialias}),e.createElement(M,{id:"renderWireFrame",label:q,value:"renderWireFrame",checked:t.renderWireFrame}),e.createElement("button",{type:"button",disabled:!n,onClick:r},z));function s(){const c=document.forms.namedItem("settingsForm"),u=c.elements.length,o=l.current;for(let d=0;d<u;d++){const{id:m,checked:i}=c.elements[d];t[m]!==i?o.add(m):o.has(m)&&o.delete(m)}a(Boolean(o.size))}function r(){const c=document.forms.namedItem("settingsForm");l.current.forEach(u=>{const{checked:o}=c.elements.namedItem(u);E[u]=o}),window.location.reload()}}function Z(){const{closeMenu:t,selectedTabIndex:l,setSelectedTabIndex:n}=p.exports.useContext(h);return e.createElement(v,{onClose:t},e.createElement(j,{id:"menu",defaultTabIndex:l,onSelect:n},e.createElement(D,{tabLabel:"mapSelector"}),e.createElement(N,{tabLabel:"controls"}),e.createElement(G,{tabLabel:"settings"})))}export{Z as default};
