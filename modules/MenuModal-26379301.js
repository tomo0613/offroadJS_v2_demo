import{j as e,r as h}from"../vendor/react-01fd2a3a.js";import{I as w,n as S,M as g,m as F,c as i,u as m,a as L}from"../indexc5d348e0.js";import{L as R,S as b}from"./Switch-9a6a2f6d.js";import"../vendor/vendor-8996eea6.js";import"../vendor/cannon-b9fe1075.js";import"../vendor/three-5c8f7b36.js";function T({id:n,label:t,value:s="",defaultValue:o="",checked:d=!1,onChange:u}){const l=u?{checked:d,onChange:r}:{defaultChecked:d};return e.jsx(w,{label:t,id:n,children:e.jsx("input",{type:"checkbox",id:n,name:n,value:s,...l})});function r({currentTarget:a}){u(a.checked?s:o,n)}}function f({id:n,label:t,defaultValue:s,onChange:o=S,...d}){const[u,l]=h.useState(s);return e.jsxs(w,{label:t,id:n,children:[e.jsx("input",{type:"range",id:n,name:n,defaultValue:s,onChange:r,...d}),e.jsx("input",{value:u,onChange:S,tabIndex:-1})]});function r(a){const c=Number(a.currentTarget.value);l(c),o(c,n)}}const C=function({children:n}){return e.jsx("div",{className:"tabbedBox__tabPanel",children:n})};function M({index:n,label:t,classNames:s,onClick:o}){return e.jsx("span",{className:`tabbedBox__tab ${s}`,"data-index":n,onClick:o,children:t})}function I({children:n,defaultTabIndex:t=0,onSelect:s=S,...o}){const[d,u]=h.useState(t);return e.jsxs("div",{className:"tabbedBox",...o,children:[e.jsx("div",{className:"tabbedBox__tabBar",children:n.map((r,a)=>{const{tabLabel:c}=r.props,p=d===a?"selected":"";return e.jsx(M,{index:a,label:c,onClick:l,classNames:p},c)})}),n[d]]});function l({currentTarget:r}){const c=Number(r.dataset.index);u(c),s(c)}}function v({tabLabel:n}){return e.jsxs(C,{tabLabel:n,children:[e.jsxs("p",{children:["Open menu: ",e.jsx("span",{children:"Tab"})]}),e.jsx("hr",{}),e.jsxs("p",{children:["Respawn at last checkpoint: ",e.jsx("span",{children:"R"})]}),e.jsxs("p",{children:["Reload map: ",e.jsx("span",{children:"Alt + R"})]}),e.jsxs("p",{children:["Accelerate: ",e.jsx("span",{children:"↑"})," / ",e.jsx("span",{children:"W"})]}),e.jsxs("p",{children:["Reverse: ",e.jsx("span",{children:"↓"})," / ",e.jsx("span",{children:"S"})]}),e.jsxs("p",{children:["Steer left: ",e.jsx("span",{children:"←"})," / ",e.jsx("span",{children:"A"})]}),e.jsxs("p",{children:["Steer right: ",e.jsx("span",{children:"→"})," / ",e.jsx("span",{children:"D"})]}),e.jsxs("p",{children:["Hand brake: ",e.jsx("span",{children:"Space"})]}),e.jsxs("p",{children:["Switch camera: ",e.jsx("span",{children:"C"})]}),e.jsxs("p",{children:["Pause: ",e.jsx("span",{children:"P"})]}),e.jsx("hr",{}),e.jsxs("p",{children:["Open/close editor panel: ",e.jsx("span",{children:"M"})]}),e.jsxs("p",{children:["(editor) Mouse select: ",e.jsx("span",{children:"Alt + click"})," / ",e.jsx("span",{children:"double click"})]}),e.jsxs("p",{children:["(editor) Toggle mouse action move/rotate: ",e.jsx("span",{children:"G"})]}),e.jsxs("p",{children:["(editor) Snap on mouse move: ",e.jsx("span",{children:"Shift"})]}),e.jsxs("p",{children:["(editor) Remove selected object: ",e.jsx("span",{children:"Delete"})]})]})}const V="mapList",B="load",E=Object.keys(F);function D({tabLabel:n}){const{gameProgressManager:t,closeMenu:s}=h.useContext(g),[o,d]=h.useState();return e.jsxs(C,{tabLabel:n,children:[e.jsx(R,{label:V,contentList:E,selected:o,onClick:d,onDoubleClick:u}),e.jsx("button",{onClick:()=>{u()},children:B})]});function u(l=o){l&&(t.loadMap(l),s())}}function P({tabLabel:n}){const{renderer:t}=h.useContext(g),[s,o]=h.useState(!!document.fullscreenElement),[d,u]=h.useState(i.renderWireFrame),[l,r]=h.useState(i.showTelemetry);h.useEffect(()=>{document.fullscreenElement&&!s?document.exitFullscreen():s&&document.documentElement.requestFullscreen()},[s]);function a(){o(!s),i.fullscreen=!s}function c(x){u(x),i.renderWireFrame=x}function p(x){t.setPixelRatio(x),i.resolutionScale=x}function j(x){i.audioVolume=x}function k(x){r(x),i.showTelemetry=x}function y(x){i.autoResetDelay=x}return e.jsxs(C,{tabLabel:n,children:[e.jsx(b,{id:"fullscreen",label:m.fullscreenSwitchLabel,on:s,onChange:a}),e.jsx(b,{id:"renderWireFrame",label:m.renderWireFrameSwitchLabel,on:d,onChange:c}),e.jsx(f,{id:"resolutionScale",label:m.resolutionScaleSliderLabel,min:.1,max:1,step:.1,defaultValue:i.resolutionScale,onChange:p}),e.jsx(f,{id:"audioVolume",label:m.audioVolume,min:0,max:1,step:.1,defaultValue:i.audioVolume,onChange:j}),e.jsx(b,{id:"showTelemetry",label:m.showTelemetry,on:l,onChange:k}),e.jsx("hr",{}),e.jsx(f,{id:"autoResetDelay",label:m.autoResetDelay,min:100,max:5e3,step:100,defaultValue:i.autoResetDelay,onChange:y}),e.jsx("hr",{}),e.jsx(W,{})]})}function W(){const n={antialias:i.antialias,renderShadows:i.renderShadows},t=h.useRef(new Set),[s,o]=h.useState(!1);return e.jsxs("form",{id:"settingsForm",onChange:d,children:[e.jsx(T,{id:"antialias",label:m.antialiasCheckboxLabel,value:"antialias",checked:n.antialias}),e.jsx(T,{id:"renderShadows",label:m.renderShadowsCheckboxLabel,value:"renderShadows",checked:n.renderShadows}),e.jsx("button",{type:"button",disabled:!s,onClick:u,children:m.applySettingsButtonLabel})]});function d(){const l=document.forms.namedItem("settingsForm"),r=l.elements.length,a=t.current;for(let c=0;c<r;c++){const{id:p,checked:j}=l.elements[c];n[p]!==j?a.add(p):a.has(p)&&a.delete(p)}o(!!a.size)}function u(){const l=document.forms.namedItem("settingsForm");t.current.forEach(r=>{const{checked:a}=l.elements.namedItem(r);i[r]=a}),window.location.reload()}}function z(){const{closeMenu:n,selectedTabIndex:t,setSelectedTabIndex:s}=h.useContext(g);return e.jsx(L,{onClose:n,children:e.jsxs(I,{id:"menu",defaultTabIndex:t,onSelect:s,children:[e.jsx(D,{tabLabel:"mapSelector"}),e.jsx(v,{tabLabel:"controls"}),e.jsx(P,{tabLabel:"settings"})]})})}export{z as default};
