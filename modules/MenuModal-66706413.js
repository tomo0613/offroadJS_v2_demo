import{j as e,r as x}from"../vendor/react-6a63c5cb.js";import{I as C,n as p,M as j,m as F,c as h,u as m,a as L}from"../indexd1258c06.js";import{L as M,S as f}from"./Switch-67dd5044.js";import"../vendor/vendor-5e83183c.js";import"../vendor/cannon-f72e7d54.js";import"../vendor/three-cf704d0e.js";function S({id:n,label:t,value:s="",defaultValue:o="",checked:d=!1,onChange:u}){const l=u?{checked:d,onChange:r}:{defaultChecked:d};return e.jsx(C,{label:t,id:n,children:e.jsx("input",{type:"checkbox",id:n,name:n,value:s,...l})});function r({currentTarget:a}){u(a.checked?s:o,n)}}function g({id:n,label:t,defaultValue:s,onChange:o=p,...d}){const[u,l]=x.useState(s);return e.jsxs(C,{label:t,id:n,children:[e.jsx("input",{type:"range",id:n,name:n,defaultValue:s,onChange:r,...d}),e.jsx("input",{value:u,onChange:p,tabIndex:-1})]});function r(a){const c=Number(a.currentTarget.value);l(c),o(c,n)}}const b=function({children:n}){return e.jsx("div",{className:"tabbedBox__tabPanel",children:n})};function T({index:n,label:t,classNames:s,onClick:o}){return e.jsx("span",{className:`tabbedBox__tab ${s}`,"data-index":n,onClick:o,children:t})}function w({children:n,defaultTabIndex:t=0,onSelect:s=p,...o}){const[d,u]=x.useState(t);return e.jsxs("div",{className:"tabbedBox",...o,children:[e.jsx("div",{className:"tabbedBox__tabBar",children:n.map((r,a)=>{const{tabLabel:c}=r.props,i=d===a?"selected":"";return e.jsx(T,{index:a,label:c,onClick:l,classNames:i},c)})}),n[d]]});function l({currentTarget:r}){const c=Number(r.dataset.index);u(c),s(c)}}function I({tabLabel:n}){return e.jsxs(b,{tabLabel:n,children:[e.jsxs("p",{children:["Open menu: ",e.jsx("span",{children:"Tab"})]}),e.jsx("hr",{}),e.jsxs("p",{children:["Respawn at last checkpoint: ",e.jsx("span",{children:"R"})]}),e.jsxs("p",{children:["Reload map: ",e.jsx("span",{children:"Alt + R"})]}),e.jsxs("p",{children:["Accelerate: ",e.jsx("span",{children:"↑"})," / ",e.jsx("span",{children:"W"})]}),e.jsxs("p",{children:["Reverse: ",e.jsx("span",{children:"↓"})," / ",e.jsx("span",{children:"S"})]}),e.jsxs("p",{children:["Steer left: ",e.jsx("span",{children:"←"})," / ",e.jsx("span",{children:"A"})]}),e.jsxs("p",{children:["Steer right: ",e.jsx("span",{children:"→"})," / ",e.jsx("span",{children:"D"})]}),e.jsxs("p",{children:["Hand brake: ",e.jsx("span",{children:"Space"})]}),e.jsxs("p",{children:["Switch camera: ",e.jsx("span",{children:"C"})]}),e.jsxs("p",{children:["Pause: ",e.jsx("span",{children:"P"})]}),e.jsx("hr",{}),e.jsxs("p",{children:["Open/close editor panel: ",e.jsx("span",{children:"M"})]}),e.jsxs("p",{children:["(editor) Mouse select: ",e.jsx("span",{children:"Alt + click"})," / ",e.jsx("span",{children:"double click"})]}),e.jsxs("p",{children:["(editor) Toggle mouse action move/rotate: ",e.jsx("span",{children:"G"})]}),e.jsxs("p",{children:["(editor) Snap on mouse move: ",e.jsx("span",{children:"Shift"})]}),e.jsxs("p",{children:["(editor) Remove selected object: ",e.jsx("span",{children:"Delete"})]})]})}const R="mapList",v="load",B=Object.keys(F);function E({tabLabel:n}){const{gameProgressManager:t,closeMenu:s}=x.useContext(j),[o,d]=x.useState();return e.jsxs(b,{tabLabel:n,children:[e.jsx(M,{label:R,contentList:B,selected:o,onClick:d,onDoubleClick:u}),e.jsx("button",{onClick:()=>{u()},children:v})]});function u(l=o){l&&(t.loadMap(l),s())}}function V({tabLabel:n}){const{renderer:t}=x.useContext(j),[s,o]=x.useState(!!document.fullscreenElement),[d,u]=x.useState(h.renderWireFrame);x.useEffect(()=>{document.fullscreenElement&&!s?document.exitFullscreen():s&&document.documentElement.requestFullscreen()},[s]);function l(){o(!s),h.fullscreen=!s}function r(i){u(i),h.renderWireFrame=i}function a(i){t.setPixelRatio(i),h.resolutionScale=i}function c(i){h.audioVolume=i}return e.jsxs(b,{tabLabel:n,children:[e.jsx(f,{id:"fullscreen",label:m.fullscreenSwitchLabel,on:s,onChange:l}),e.jsx(f,{id:"renderWireFrame",label:m.renderWireFrameSwitchLabel,on:d,onChange:r}),e.jsx(g,{id:"resolutionScale",label:m.resolutionScaleSliderLabel,min:.1,max:1,step:.1,defaultValue:h.resolutionScale,onChange:a}),e.jsx(g,{id:"audioVolume",label:m.audioVolume,min:0,max:1,step:.1,defaultValue:h.audioVolume,onChange:c}),e.jsx("hr",{}),e.jsx(P,{})]})}function P(){const n={antialias:h.antialias,renderShadows:h.renderShadows},t=x.useRef(new Set),[s,o]=x.useState(!1);return e.jsxs("form",{id:"settingsForm",onChange:d,children:[e.jsx(S,{id:"antialias",label:m.antialiasCheckboxLabel,value:"antialias",checked:n.antialias}),e.jsx(S,{id:"renderShadows",label:m.renderShadowsCheckboxLabel,value:"renderShadows",checked:n.renderShadows}),e.jsx("button",{type:"button",disabled:!s,onClick:u,children:m.applySettingsButtonLabel})]});function d(){const l=document.forms.namedItem("settingsForm"),r=l.elements.length,a=t.current;for(let c=0;c<r;c++){const{id:i,checked:k}=l.elements[c];n[i]!==k?a.add(i):a.has(i)&&a.delete(i)}o(!!a.size)}function u(){const l=document.forms.namedItem("settingsForm");t.current.forEach(r=>{const{checked:a}=l.elements.namedItem(r);h[r]=a}),window.location.reload()}}function O(){const{closeMenu:n,selectedTabIndex:t,setSelectedTabIndex:s}=x.useContext(j);return e.jsx(L,{onClose:n,children:e.jsxs(w,{id:"menu",defaultTabIndex:t,onSelect:s,children:[e.jsx(E,{tabLabel:"mapSelector"}),e.jsx(I,{tabLabel:"controls"}),e.jsx(V,{tabLabel:"settings"})]})})}export{O as default};
