import{j as e,r as u}from"../vendor/react-6a63c5cb.js";import{I as g,n as m,M as j,m as k,c as x,u as p,a as F}from"../indexa711bd7e.js";import{L,S as f}from"./Switch-0a92a31b.js";import"../vendor/vendor-5e83183c.js";import"../vendor/cannon-a7a89bfa.js";import"../vendor/three-30fa292b.js";function S({id:n,label:a,value:s="",defaultValue:o="",checked:i=!1,onChange:d}){const r=d?{checked:i,onChange:c}:{defaultChecked:i};return e.jsx(g,{label:a,id:n,children:e.jsx("input",{type:"checkbox",id:n,name:n,value:s,...r})});function c({currentTarget:l}){d(l.checked?s:o,n)}}function M({id:n,label:a,defaultValue:s,onChange:o=m,...i}){const[d,r]=u.useState(s);return e.jsxs(g,{label:a,id:n,children:[e.jsx("input",{type:"range",id:n,name:n,defaultValue:s,onChange:c,...i}),e.jsx("input",{value:d,onChange:m,tabIndex:-1})]});function c(l){const t=Number(l.currentTarget.value);r(t),o(t,n)}}const b=function({children:n}){return e.jsx("div",{className:"tabbedBox__tabPanel",children:n})};function T({index:n,label:a,classNames:s,onClick:o}){return e.jsx("span",{className:`tabbedBox__tab ${s}`,"data-index":n,onClick:o,children:a})}function w({children:n,defaultTabIndex:a=0,onSelect:s=m,...o}){const[i,d]=u.useState(a);return e.jsxs("div",{className:"tabbedBox",...o,children:[e.jsx("div",{className:"tabbedBox__tabBar",children:n.map((c,l)=>{const{tabLabel:t}=c.props,h=i===l?"selected":"";return e.jsx(T,{index:l,label:t,onClick:r,classNames:h},t)})}),n[i]]});function r({currentTarget:c}){const t=Number(c.dataset.index);d(t),s(t)}}function I({tabLabel:n}){return e.jsxs(b,{tabLabel:n,children:[e.jsxs("p",{children:["Open menu: ",e.jsx("span",{children:"Tab"})]}),e.jsx("hr",{}),e.jsxs("p",{children:["Respawn at last checkpoint: ",e.jsx("span",{children:"R"})]}),e.jsxs("p",{children:["Reload map: ",e.jsx("span",{children:"Alt + R"})]}),e.jsxs("p",{children:["Accelerate: ",e.jsx("span",{children:"↑"})," / ",e.jsx("span",{children:"W"})]}),e.jsxs("p",{children:["Reverse: ",e.jsx("span",{children:"↓"})," / ",e.jsx("span",{children:"S"})]}),e.jsxs("p",{children:["Steer left: ",e.jsx("span",{children:"←"})," / ",e.jsx("span",{children:"A"})]}),e.jsxs("p",{children:["Steer right: ",e.jsx("span",{children:"→"})," / ",e.jsx("span",{children:"D"})]}),e.jsxs("p",{children:["Hand brake: ",e.jsx("span",{children:"Space"})]}),e.jsxs("p",{children:["Switch camera: ",e.jsx("span",{children:"C"})]}),e.jsxs("p",{children:["Pause: ",e.jsx("span",{children:"P"})]}),e.jsx("hr",{}),e.jsxs("p",{children:["Open/close editor panel: ",e.jsx("span",{children:"M"})]}),e.jsxs("p",{children:["(editor) Mouse select: ",e.jsx("span",{children:"Alt + click"})," / ",e.jsx("span",{children:"double click"})]}),e.jsxs("p",{children:["(editor) Toggle mouse action move/rotate: ",e.jsx("span",{children:"G"})]}),e.jsxs("p",{children:["(editor) Snap on mouse move: ",e.jsx("span",{children:"Shift"})]}),e.jsxs("p",{children:["(editor) Remove selected object: ",e.jsx("span",{children:"Delete"})]})]})}const R="mapList",v="load",B=Object.keys(k);function E({tabLabel:n}){const{gameProgressManager:a,closeMenu:s}=u.useContext(j),[o,i]=u.useState();return e.jsxs(b,{tabLabel:n,children:[e.jsx(L,{label:R,contentList:B,selected:o,onClick:i,onDoubleClick:d}),e.jsx("button",{onClick:()=>{d()},children:v})]});function d(r=o){r&&(a.loadMap(r),s())}}function P({tabLabel:n}){const{renderer:a}=u.useContext(j),[s,o]=u.useState(!!document.fullscreenElement),[i,d]=u.useState(x.renderWireFrame);u.useEffect(()=>{document.fullscreenElement&&!s?document.exitFullscreen():s&&document.documentElement.requestFullscreen()},[s]);function r(){o(!s),x.fullscreen=!s}function c(t){d(t),x.renderWireFrame=t}function l(t){a.setPixelRatio(t),x.resolutionScale=t}return e.jsxs(b,{tabLabel:n,children:[e.jsx(f,{id:"fullscreen",label:p.fullscreenSwitchLabel,on:s,onChange:r}),e.jsx(f,{id:"renderWireFrame",label:p.renderWireFrameSwitchLabel,on:i,onChange:c}),e.jsx(M,{id:"resolutionScale",label:p.resolutionScaleSliderLabel,min:.1,max:1,step:.1,defaultValue:x.resolutionScale,onChange:l}),e.jsx("hr",{}),e.jsx(y,{})]})}function y(){const n={antialias:x.antialias,renderShadows:x.renderShadows},a=u.useRef(new Set),[s,o]=u.useState(!1);return e.jsxs("form",{id:"settingsForm",onChange:i,children:[e.jsx(S,{id:"antialias",label:p.antialiasCheckboxLabel,value:"antialias",checked:n.antialias}),e.jsx(S,{id:"renderShadows",label:p.renderShadowsCheckboxLabel,value:"renderShadows",checked:n.renderShadows}),e.jsx("button",{type:"button",disabled:!s,onClick:d,children:p.applySettingsButtonLabel})]});function i(){const r=document.forms.namedItem("settingsForm"),c=r.elements.length,l=a.current;for(let t=0;t<c;t++){const{id:h,checked:C}=r.elements[t];n[h]!==C?l.add(h):l.has(h)&&l.delete(h)}o(!!l.size)}function d(){const r=document.forms.namedItem("settingsForm");a.current.forEach(c=>{const{checked:l}=r.elements.namedItem(c);x[c]=l}),window.location.reload()}}function O(){const{closeMenu:n,selectedTabIndex:a,setSelectedTabIndex:s}=u.useContext(j);return e.jsx(F,{onClose:n,children:e.jsxs(w,{id:"menu",defaultTabIndex:a,onSelect:s,children:[e.jsx(E,{tabLabel:"mapSelector"}),e.jsx(I,{tabLabel:"controls"}),e.jsx(P,{tabLabel:"settings"})]})})}export{O as default};
